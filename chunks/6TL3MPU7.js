import{a as x,b as v}from"./JNDXNXE7.js";import{q as I}from"./MTK4R7RQ.js";import{b as L}from"./CQYOL7V5.js";import{B as h,C as s,H as C,w as d}from"./JGNRUIUO.js";import{t as i}from"./5XNCO7TL.js";import{a as B}from"./4B6UFNBQ.js";import{n as m,r as S,t as u}from"./6S5CCPHR.js";import{f as q}from"./GAV6HCJA.js";var r=q(B()),F=T=>{let{value:y,syncChangeAILanguage:A,unmountTriggerChange:c,onChange:E,onChanged:p,onSyncToServer:O,sx:P,..._}=T,f=L(),{userSettings:b,setUserSettings:N}=C(),{collapsed:l}=v(),t=E||(async e=>{n.current.isTriggerChange=!0;let a=await d.isLogin(),g="";A&&(g=S.find(U=>i.isEqualLanguage(U,e))?.value),await N(g?{preferredLanguage:s(e),language:g}:{preferredLanguage:s(e)},{onSyncToServer:()=>{O?.(e),a&&p?.(e)}}),a||p?.(e)}),w=m&&typeof f.query.locale=="string"?f.query.locale:"",o=h(w||y||b?.preferredLanguage||""),G=l?{width:32,height:32,padding:"6px","& > p":{display:"none"}}:{},n=(0,r.useRef)({isTriggerChange:!1,unmountTriggerChange:c,onChange:t,currentLanguage:o});return n.current.unmountTriggerChange=c,n.current.onChange=t,n.current.currentLanguage=o,(0,r.useEffect)(()=>()=>{if(!n.current.unmountTriggerChange||n.current.isTriggerChange)return;let e=u.find(a=>a.value===o);e&&(i.saveUsageLanguage(e),n.current.onChange(e.value))},[]),r.default.createElement(x,{labelMaxWidth:100,sx:{p:1,maxWidth:"unset",bgcolor:"transparent","&:hover":{bgcolor:e=>e.palette.mode==="dark"?"#3B3D3E":"#E9E9EB"},...G,...P},options:u,value:o,onChange:t,...l?{startIcon:r.default.createElement(I,{icon:"Language",sx:{fontSize:"18px",mx:"4px"}}),endIcon:null}:{},..._})},Q=F;export{Q as a};
