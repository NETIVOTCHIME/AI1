import{a as Ie,k as ye,o as Me,p as Ae}from"./7DC4JSX5.js";import{d as ge}from"./KBLJ3VRP.js";import{a as de}from"./2KT44S3D.js";import{b as Le}from"./ZXP22K55.js";import{I as _,b as pe,c as _e,d as A,l as L,n as ue,v as me,x as fe}from"./JGNRUIUO.js";import{b as Ee}from"./TJI4TFLZ.js";import{A as Z,B as ee,D as oe,E as re,F as te,G as ne,H as ae,I as se,J as ie,K as le,S as O,a as U,c as b,d as x,e as G,f as w,g as v,h as N,i as F,k as H,l as Y,m as V,n as X,o as B,q as K,r as q,s as $,t as j,v as z,x as W,y as J,z as Q}from"./TFQXSVKK.js";import{Rb as ce,f as k,i as u,ka as C,n as D,o as T}from"./5XNCO7TL.js";import{a as g}from"./4B6UFNBQ.js";import{f as d}from"./GAV6HCJA.js";var xe=u({key:"PlanCategoryState",default:"individual"}),Ge=u({key:"MaxAIClientCreateSessionLoadingAtom",default:!1}),we=u({key:"PricingHooksPopupState",default:{show:!1}}),ve=u({key:"PricingUpgradeContentOpenAtom",default:!1}),Ne=u({key:"PricingPlansInfoState",default:ue}),Fe=u({key:"SubscriptionApiLoadingState",default:!1}),He=u({key:"UnableSubscriptionState",default:{show:!1,barHeight:0}}),Ye=u({key:"PricingUpgradePlanContentRenderStateAtom",default:{type:"cardList",renderTypes:[]}});var S=d(g());var R=()=>{let[e,o]=D(fe),{email:r,userInfo:n,isFreeUser:t}=_(),l=async(c=!1,p=!0)=>{try{p&&o(I=>({...I,loading:!0}));let E=await me.getUserGroupInfo(c);return o(I=>({...I,...E,loading:!1})),E}catch{return null}},a=e?.group_owner_email,s=(0,S.useMemo)(()=>r===a,[r,a]),m=(0,S.useMemo)(()=>!a||!r?e.members??[]:s&&e.members?e.members:[{email:a,group_role:"ADMIN"},{email:r,group_role:"MEMBER"}],[s,e.members,a,r]);return{groupId:n?.group_id,isGroupOwner:t?!1:s,isGroupMember:t?!1:!s,groupOwnerEmail:a,syncUserGroupInfo:l,members:m,...e}};var Pe=d(g()),Oe=(e=!0)=>{let{isLogin:o}=A(),{userInfo:r,isPayingUser:n}=_(),{syncUserGroupInfo:t}=R(),l=!!r;return(0,Pe.useEffect)(()=>{o&&l&&n&&t(e)},[o,l,n,e]),null};var h=d(g());var Se=(e=!0)=>{let{isLogin:o}=A(),r=T(_e),{syncUserInfo:n,userInfoFetchHasError:t}=_(),l=T(pe);de(()=>{a()}),(0,h.useEffect)(()=>{o&&n(e)},[o,e]),ge(()=>{t||(a(),n())});let a=async()=>{L.checkAccessToken();let s=await L.getAuthTokens(),c=!(s?.refreshToken?L.isTokenExpired(s.refreshToken):!0)&&!!s;l(c&&s?p=>p.isLogin===c?p:{...p,isLogin:c,authTokens:s}:p=>p.isLogin===c?p:{...p,isLogin:!1,authTokens:null}),r(!0)};return(0,h.useEffect)(()=>{a()},[]),null};var Te=d(g());var Re=()=>{let{t:e}=k(),{loaded:o,currentUserPlan:r,subscriptionType:n}=_();return(0,Te.useMemo)(()=>{if(!o)return"";if(r.name==="free")return"Free";let t=Le(r.name);switch(n){case"monthly":t+=` \xB7 ${e("package__common:monthly")}`;break;case"yearly":t+=` \xB7 ${e("package__common:yearly")}`;break;case"quarterly":t+=` \xB7 ${e("package__common:quarterly")}`;break;default:break}return t},[e,o,r,n])};var y=d(g()),he=e=>{let{currentUserPlan:o,userInfo:r}=_(),n=(0,y.useRef)(null),t=(0,y.useRef)(e);t.current=e,(0,y.useEffect)(()=>{r&&n.current!==o.name&&(t.current(r.role),n.current=o.name)},[o.name,r])};var ke=async(e,o)=>{try{let{conversationId:r,AIModel:n,paywallType:t,buttonType:l,paywallData:a}=o,s=n??a?.info?.api_model_selection,m=r&&await ye.getService().getConversationPayWallModel(r);if(m&&(s=m),e==="click"&&!o.targetElement)throw new Error("targetElement is required when action is click");let c=Ae({targetElement:o.targetElement,rootContainerId:o.rootContainerId}),p=Me(),E=a?.info?.user_paywall_reason??o.paywallReason??"",I=a?.info?.source_type??"";Ie(e==="show"?"paywall_showed":"paywall_clicked",ce({ai_model:s,platform_feature:c,platform:p,paywall_type:t,button_type:l,paywall_reason:E,source_type:I}))}catch{}},Uo=Ee(ke,1e3);var Go=e=>!U.includes(e);var wo=(e,o,r)=>{let{checkValid:n=!0,fallback:t=!0}=r||{};if(e){let l=O[e]||[],a=l.find(s=>{let m=o&&s.oldModelValues?.includes(o),c=s.value===o||m;return n?c&&s.isDeprecated!==!0:c});return!a&&t?l[0]:a||null}return o&&Object.values(O).flat().find(l=>l.value===o||l.oldModelValues?.includes(o))||null};var M=e=>({key:e.value,label:e.title,value:e}),P=(e,o=C(),r=3)=>e.length<=r?e.map(M):[...e.slice(0,r).map(M),{key:o,type:"more",label:"package__features:chat__ai_model_selector__more__title",children:e.slice(r).map(M)}],f={FREE:[B],FAST:[re,w,q,se,b],SMART:[oe,F,K,te,ae,ie],REASONING:[x,ee,W,J],LEGACY:[Q,N,j,$,ne,G,v,z,Z],ART:[V,Y,X,le,H]},i={FREE:{key:"FREE",type:"group",label:"package__features:chat__ai_model_selector__free_group__title",children:[M(f.FREE[0])]},FAST:{key:"FAST",type:"group",label:"package__features:chat__ai_model_selector__fast_group__title",children:P(f.FAST,"more-fast")},SMART:{key:"SMART",type:"group",label:"package__features:chat__ai_model_selector__smart_group__title",children:P(f.SMART,"more-smart",4)},REASONING:{key:"REASONING",type:"group",label:"package__features:chat__ai_model_selector__reasoning_group__title",children:P(f.REASONING,"more-reasoning",2)},LEGACY:{key:"LEGACY",type:"group",label:"package__features:chat__ai_model_selector__legacy_group__title",children:P(f.LEGACY,"more-legacy")},ART:{key:"ART",type:"group",label:"package__features:chat__ai_model_selector__image_group__title",children:f.ART.map(M)}},Yo=e=>({Chat:[i.SMART,i.REASONING,i.FAST,i.LEGACY],ContextMenu:[i.SMART,i.REASONING,i.FAST,i.LEGACY],Summary:[i.SMART,i.LEGACY,i.FAST],Search:[i.SMART,i.REASONING,i.FAST,i.LEGACY],Art:[i.ART]})[e]||[];export{we as a,ve as b,Fe as c,He as d,Ye as e,R as f,ke as g,Uo as h,Oe as i,Se as j,Re as k,he as l,Go as m,wo as n,f as o,Yo as p};
