import"./3BL6ANT4.js";import{a as Hs}from"./6TL3MPU7.js";import{a as zs}from"./B2AI6GVG.js";import{a as ye,b as Fs,c as $n,d as gt,e as Ws,f as ao}from"./ZLNA6E3X.js";import{a as Vs,b as Xn}from"./5KMOXTP5.js";import{C as Os,a as ns,b as ko,c as wr,d as ss,e as Ku,f as ls,h as ps,j as ds,k as Yn,l as cs,m as hs,n as gs,o as bs,p as xs,q as ws,r as Cs,s as Ss,t as Ps,u as As,v as Bs,w as Qu,x as Un,y as Ls,z as Ds}from"./6P5WLQ46.js";import"./CSTNV3XX.js";import"./2IHYRZVS.js";import{b as as}from"./A2MG455G.js";import{b as _s}from"./JNDXNXE7.js";import"./S44E2XQG.js";import"./2UXEOAF5.js";import{a as vs}from"./BLOJHRJ5.js";import{B as Ts,M as Is,Q as Ir,R as Pr,X as ks,b as is,i as io,r as fs}from"./BDL4PKXN.js";import"./AHEP7TF6.js";import"./ZRYDJGAJ.js";import"./UAB7UEHC.js";import"./SGC75SOE.js";import{f as Ao,g as Se}from"./GSZISHI6.js";import{b as Ba,c as Zu}from"./A3LRHSJN.js";import{a as Fn,g as Pa}from"./HGYQWNXE.js";import{c as Ea,e as os}from"./QVFQKYNC.js";import{a as On,b as Vn}from"./ALVC64AT.js";import"./YGYPN7KU.js";import"./LU2HGRXL.js";import"./W33EMW23.js";import{a as Io,m as Fa,p as es,r as qu,x as ts}from"./QWOIRRFI.js";import{a as Ru}from"./SDHYMGTM.js";import{a as et}from"./TYFNBCRN.js";import{a as Va,b as ro}from"./CR2YDKGZ.js";import{K as za,La as qa,Ma as br,N as Na,Oa as Ka,P as Ha,Pa as Hn,R as fr,S as Et,Ta as xr,V as Ya,X as Ua,Y as Po,b as ya,c as Z,ca as Xa,d as Aa,ha as $a,la as Ra,ma as ja,pa as gr,v as zn}from"./ORELMZLT.js";import{d as mr,h as Wn,k as Ia}from"./AGYWA4SU.js";import"./7DYLEKAB.js";import{d as hr,e as Ga,f as ct}from"./P3PDWRVN.js";import{c as ju,q as te}from"./MTK4R7RQ.js";import"./7CAECC4G.js";import"./REGE2LR7.js";import"./XHCCXCYD.js";import"./TIMUG6T2.js";import"./XVSJYAT4.js";import{b as Mn,c as Ca}from"./EB3YQT75.js";import{d as ma}from"./FN65SWAZ.js";import{a as ar,h as wa}from"./DIWBTETG.js";import{a as _e}from"./JSRZNT2O.js";import{f as ha,i as ga,j as ba,m as xa,n as va,z as Bt}from"./ZFBUFDPC.js";import"./AKHNMYRV.js";import"./BVERUSUQ.js";import"./TK64BITX.js";import{k as sr,l as lr}from"./L6QQVHN6.js";import"./OI6NWTAW.js";import"./HO5BHRQK.js";import{a as $u,b as to}from"./EOOP75QG.js";import"./QKB5ZQQZ.js";import"./I3U64XYM.js";import"./MAQUK7KH.js";import"./XQ7PM33A.js";import"./XXHIGHFM.js";import{b as Dn}from"./UVPUVI6U.js";import"./3VZZYPNH.js";import"./OMLGX5X7.js";import"./ANHHJOOA.js";import{a as ze,k as Sa}from"./7DC4JSX5.js";import"./R5Q6YK7C.js";import{c as rr}from"./FEEF6AYC.js";import"./IRTMCHL6.js";import"./HXNEOZ6Q.js";import{b as Za}from"./UHLUWB5M.js";import{a as Gu}from"./5DTAMPQH.js";import"./3G4ATOPN.js";import"./7TJ6AWDV.js";import{a as qi,b as Je}from"./J4EQH5B4.js";import"./3EWN6U3Q.js";import{c as ne}from"./64KAOBVU.js";import"./B75HMIDC.js";import{a as da,c as se,d as ca,e as fe,g as _t,h as fa}from"./KBLJ3VRP.js";import{c as ir}from"./MFTWCION.js";import{c as ie}from"./XJRFS2HB.js";import"./UXV3QMB6.js";import{a as mt}from"./PMPYCEPL.js";import{b as I}from"./336CJV6T.js";import"./KOLMIKZ3.js";import"./JQWMDYRH.js";import"./YO3VSBOX.js";import"./U6L5EB2O.js";import"./32NMDTIF.js";import"./FME6Q7JF.js";import{a as To}from"./VPRCB5KD.js";import"./IFSZTWFO.js";import{c as pr}from"./2FUMJN6B.js";import{a as oo}from"./2KT44S3D.js";import"./BE2JDFDC.js";import{a as ua,b as nr}from"./TKVYX3NT.js";import"./ISHNEOMN.js";import"./CRJNFLSL.js";import"./7XXUIGE4.js";import{b as Pn,c as Hi}from"./T2HSSEKO.js";import"./P3TOHEEA.js";import{i as Vi,j as Fi}from"./BZSZAF2C.js";import{h as Go,o as Zo,r as Ni}from"./YMQMZIXS.js";import{b as qo,e as G}from"./ZJHYEVX5.js";import"./UBQOP3W7.js";import{g as Wi}from"./SD5BERUU.js";import"./EP4CV5DW.js";import"./CCHM5YNC.js";import{b as In}from"./KZ24SPAU.js";import{a as jo,b as Mi,c as Ut,d as Li,f as ut,ga as zi,ka as b,oa as S}from"./GZKBVB6W.js";import{a as pt}from"./PCHDBHHN.js";import{a as Ns}from"./QB2T4ZIR.js";import"./6PMYWRC4.js";import{a as ht,b as yr,c as Tr}from"./MBTV4455.js";import"./WQUO2XCP.js";import"./7OFLY6G7.js";import"./KREF446R.js";import{d as ys}from"./6FRVXCKT.js";import{a as Sr}from"./XYLIULLK.js";import{i as Qa,j as Ja}from"./C7UFCD37.js";import{a as Ma}from"./PW2PVNG6.js";import{a as La,c as dr,d as Nn,e as Da,m as dt,n as K,o as Oa,q as cr}from"./ZV7MSI2C.js";import"./CQYOL7V5.js";import"./XMSUU4RH.js";import{a as Es,b as Ms}from"./GRG36H53.js";import{A as Cr,E as _r,F as tt,G as ot,s as us,y as ms,z as no}from"./QCV2OUCP.js";import{a as ft}from"./N5EAU2XY.js";import{c as rs,d as vr}from"./454JMIH7.js";import"./OYYAJZKP.js";import{j as Wa}from"./XIKYOWTD.js";import{a as Ta}from"./ZXP22K55.js";import"./QLA7PS23.js";import{a as ka}from"./SVU5JQST.js";import"./YZTDD2PY.js";import"./HPHM72CW.js";import"./OWTGYAZA.js";import{a as Ln,c as _a,g as ur}from"./CORDBAGF.js";import"./27O46L5C.js";import{a as Ki,b as $t}from"./KHKEWIY7.js";import"./TJRJAJUH.js";import"./ZF7CVWYR.js";import"./WBYFOOBE.js";import"./FBXSHX3X.js";import{H as or,I as ee,d as er,q as Bn,s as Qi,t as Ji,y as pa}from"./JGNRUIUO.js";import{b as tr}from"./TJI4TFLZ.js";import{Ea as eo,aa as ta,ha as oa,ia as ra,ka as na,l as kt,la as ia,oa as En,pa as aa,q as ea,qa as sa,ra as la}from"./HQXZBLYX.js";import{j as Jo}from"./TFQXSVKK.js";import"./57QVGQHC.js";import{Ea as yo,F as Yi,H as Ui,L as Xi,M as $i,Ob as kn,Q as Ri,S as ji,U as So,Yb as Zi,f as A,g as Di,i as Oi,ka as Xt,m as ce,n as Qt,na as At,o as Jt,qb as Gi,s as Ko,ta as Qo,ya as An}from"./5XNCO7TL.js";import"./UB52WFCV.js";import{c as Bi,h as Ei}from"./HFEXSQX6.js";import{a as v}from"./4B6UFNBQ.js";import{D as ki,b as J,c as Ti,m as _o,n as Ii,w as Pi,x as Ai}from"./6S5CCPHR.js";import"./PJ57C2TE.js";import{c as lt,f as g}from"./GAV6HCJA.js";var Nl=lt(Gr=>{"use strict";"use client";var Vd=pt();Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=void 0;var Fd=Vd(mt()),Wd=ut(),Yx=Gr.default=(0,Fd.default)((0,Wd.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft")});var rp=lt(rn=>{"use strict";"use client";var tc=pt();Object.defineProperty(rn,"__esModule",{value:!0});rn.default=void 0;var oc=tc(mt()),rc=ut(),uw=rn.default=(0,oc.default)((0,rc.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article")});var Rp=lt(mn=>{"use strict";"use client";var Fc=pt();Object.defineProperty(mn,"__esModule",{value:!0});mn.default=void 0;var Wc=Fc(mt()),zc=ut(),$y=mn.default=(0,Wc.default)((0,zc.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")});var vi=lt(gn=>{"use strict";"use client";var tf=pt();Object.defineProperty(gn,"__esModule",{value:!0});gn.default=void 0;var of=tf(mt()),rf=ut(),aP=gn.default=(0,of.default)((0,rf.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMadeOutlined")});var vu=lt(bn=>{"use strict";"use client";var af=pt();Object.defineProperty(bn,"__esModule",{value:!0});bn.default=void 0;var sf=af(mt()),lf=ut(),LP=bn.default=(0,sf.default)((0,lf.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCardOutlined")});var wu=lt(xn=>{"use strict";"use client";var pf=pt();Object.defineProperty(xn,"__esModule",{value:!0});xn.default=void 0;var uf=pf(mt()),mf=ut(),OP=xn.default=(0,uf.default)((0,mf.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")});var Cu=lt(vn=>{"use strict";"use client";var df=pt();Object.defineProperty(vn,"__esModule",{value:!0});vn.default=void 0;var cf=df(mt()),ff=ut(),FP=vn.default=(0,cf.default)((0,ff.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRightOutlined")});var _u=lt(wn=>{"use strict";"use client";var hf=pt();Object.defineProperty(wn,"__esModule",{value:!0});wn.default=void 0;var gf=hf(mt()),bf=ut(),zP=wn.default=(0,gf.default)((0,bf.jsx)("path",{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5z"}),"LogoutOutlined")});var Su=lt(Cn=>{"use strict";"use client";var xf=pt();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.default=void 0;var vf=xf(mt()),wf=ut(),HP=Cn.default=(0,vf.default)((0,wf.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNoneOutlined")});var yu=lt(_n=>{"use strict";"use client";var Cf=pt();Object.defineProperty(_n,"__esModule",{value:!0});_n.default=void 0;var _f=Cf(mt()),Sf=ut(),UP=_n.default=(0,_f.default)((0,Sf.jsx)("path",{d:"M14 11c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2m-6.02 7.25c-.29-.9-.57-1.94-.76-3L6 16.07v2.98zM12 2s5 2 5 11l2.11 1.41c.56.37.89 1 .89 1.66V22l-5-2H9l-5 2v-5.93c0-.67.33-1.29.89-1.66L7 13c0-9 5-11 5-11m0 2.36S9 6.38 9 13c0 2.25 1 5 1 5h4s1-2.75 1-5c0-6.62-3-8.64-3-8.64m6 14.69v-2.98l-1.22-.81c-.19 1.05-.47 2.1-.76 3z"}),"RocketOutlined")});var z=g(v());var Ys=g(to());var Bo=g(v()),Ju=()=>null,Us=Ju;var ve=g(v()),Xs=g(Qu());var{getBrowser:em}=new Xs.UAParser,tm=e=>{let[o,t]=(0,ve.useState)(null),[r,n]=(0,ve.useState)(null),[i,a]=(0,ve.useState)(!0),s=(0,ve.useMemo)(()=>o?o==="Chrome"?"chrome://settings/help":o==="Edge"?"edge://settings/help":o==="Chromium"?"https://download-chromium.appspot.com/":o==="Opera"?"opera://about":o==="Firefox"?"https://support.mozilla.org/en-US/kb/update-firefox-latest-release":o==="Safari"?"https://support.apple.com/en-us/HT204416":"":"",[o]);return oo(()=>{let l=em();t(l.name),n(l.version);let u=Number(l.version?.match(/\d+/)?.[0]||""),p=!0;u!==0&&(l.name==="Chrome"&&u<103&&(p=!1),l.name==="Edge"&&u<103&&(p=!1),a(p),p||ot().then(async d=>{d.ON_BOARDING_RECORD_BROWSER_VERSION||(await Un("CLIENT","[CLIENT] Browser version is not compatible",`Browser: [${l.name}]
Version: [${l.version}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),await tt("ON_BOARDING_RECORD_BROWSER_VERSION",!0))}))}),!o||!r||i?ve.default.createElement(ve.default.Fragment,null,e.children):ve.default.createElement(b,{sx:{mx:"auto",px:1,flex:1,alignItems:"center",justifyContent:"center",maxWidth:400},spacing:2},ve.default.createElement(Ps,{sx:{color:"text.primary",fontSize:"88px"}}),ve.default.createElement(S,{fontSize:"26px",fontWeight:800,color:"text.primary"},`Update your ${o} browser`),ve.default.createElement(S,{textAlign:"center",fontSize:"16px",color:"text.primary"},"In order to use this extension, please update your browser to the latest version. Your current browser version is not compatible."),ve.default.createElement(ne,{underline:"none",href:"#",target:"_blank",onClick:l=>{l.preventDefault(),l.stopPropagation(),Un("CLIENT","[CLIENT] Browser clicked update",`Browser: [${o}]
Version: [${r}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),ur({url:s})}},ve.default.createElement(G,{sx:{height:"48px",fontSize:"16px",borderRadius:"24px"},variant:"contained",color:"primary"},`Update ${o} browser`)))},$s=tm;var Ne=g(v()),Zs=g(Di());Mi();Li();var k=g(v());Mi();Li();var St=g(v());var om=e=>{let{children:o,rootId:t,root:r,disabled:n,onClickContextMenuItem:i}=e,{changeMode:a}=ja(),{liteContextMenuActionsItems:s}=fs("",{enabledFavorite:!1}),l=(0,St.useRef)(null),[u,p]=(0,St.useState)(null);return(0,St.useEffect)(()=>{if(r&&t&&!l.current){let d=document.createElement("style");d.setAttribute("data-emotion-id",t),r.appendChild(d),l.current=jo({key:"max-ai-input-assistant-context-menu",prepend:!0,container:d}),p(l.current)}},[r,t]),!r||!u?null:St.default.createElement(Ut,{value:u},St.default.createElement(As,{defaultPlacement:"bottom-start",defaultFallbackPlacements:["bottom-end","bottom","top-start","top-end","top","right","left"],root:r,menuList:s,needAutoUpdate:!0,hoverOpen:!1,menuWidth:260,referenceElement:o,onClickContextMenu:async(d,f)=>{let h=f?.target,c=On(h);if(c){let m=Vn(c);Dn(m,c)}i(d)},onClickReferenceElement:d=>{a("list");let f=d.target,h=On(f);if(h){let c=Vn(h);Dn(c,h)}},hoverIcon:null,...n?{customOpen:!0,referenceElementOpen:!1}:{}}))},Rn=om;var Rt=g(v());var Eo={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailComposeButton > Got it"},rm=e=>{let{showStateTrigger:o,...t}=e,{t:r}=A(),[n,i]=(0,Rt.useState)(!1);return(0,Rt.useEffect)(()=>{o?Ir(Eo.sceneType).then(a=>{a||Pr(Eo.sceneType).then(()=>{i(!0)})}):i(!1)},[o]),Rt.default.createElement(io,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:5},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Eo.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Eo.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Eo.id,...t},Rt.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON__text")))},Rs=rm;var yt=g(v());var Mo={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailAIReplyButton > Got it"},nm=e=>{let{showStateTrigger:o,...t}=e,{t:r}=A(),[n,i]=(0,yt.useState)(!1);return(0,yt.useEffect)(()=>{o?Ir(Mo.sceneType).then(a=>{a||Pr(Mo.sceneType).then(()=>{i(!0)})}):i(!1)},[o]),yt.default.createElement(io,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:1},placement:"top",fallbackPlacements:["bottom","right"],trigger:n,anchorElementSelectors:Mo.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Mo.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Mo.id,footerLeft:yt.default.createElement(ks,null),...t},yt.default.createElement(b,{spacing:.5},yt.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON__text"))))},js=nm;var rt=e=>e?typeof e=="function"?e():e:{},im=e=>{let{observerData:o,placement:t}=e,{id:r,config:n,buttonGroup:i,shadowRootElement:a}=o,{InputAssistantBoxSx:s,DropdownButtonStyle:l,CTAButtonStyle:u,instantReplyWebsiteType:p,needReplyDivider:d,replyDividerStyle:f,loadingButtonStyle:h,needListenElementSelector:c,brandLogoStyle:m,CTAButtonBoxStyle:x}=n,{askAIWithShortcutsV2:w}=br(),_=Z(L=>L.conversationIds[0]||""),C=fa(_),[y,P]=(0,k.useState)(null),B=Jt(Ra),E=async(L,Q)=>{if(C.current){B(p),ht();let xe=kt(L),re=[{type:"SET_VARIABLE_MAP",parameters:{VariableMap:{OperationElementSelector:{key:"OperationElementSelector",value:`[maxai-input-assistant-button-id="${r}"]`,isBuiltIn:!0},[kn.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name]:{key:kn.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name,value:p,isBuiltIn:!0}}}}];await w(re.concat(xe),{conversationId:C.current})}Q?.onClick&&Q.onClick(o)},[T,U]=(0,k.useState)(Xt()),D=(0,k.useRef)(c);(0,k.useEffect)(()=>{if(!D.current)return;let L=D.current,Q=[];if(L.forEach(re=>{(Array.isArray(re)?re:[re]).forEach(qe=>{let We=Array.from(document.querySelectorAll(qe));We.length&&Q.push(...We)})}),Q.length===0)return;let xe=new MutationObserver(()=>{U(Xt())});return Q.forEach(re=>{xe.observe(re,{attributes:!0,childList:!0,subtree:!0})}),()=>{xe.disconnect()}},[]);let N=rt(u),H=rt(l),ae=rt(s),j=rt(f),Ge=rt(h),at=rt(m),Ct=rt(x),me=(0,k.useRef)(null),{t:R}=A(["client"]),Ce=Et(_),[Wt,zt]=(0,k.useState)(!1),[Tt,st]=(0,k.useState)(!1),{isDarkMode:It}=_e(),Pt=(0,k.useMemo)(()=>{let L=kt(N),Q=kt(H),xe=kt(j),re={},Ze={};if(i.forEach(qe=>{let We=rt(qe.CTAButtonStyle),Ie=rt(qe.DropdownButtonStyle),de=rt(qe.replyDividerStyle);We&&(L=Object.assign(L||{},{...We})),Ie&&(Q=Object.assign(Q||{},{...Ie})),de&&(xe=Object.assign(xe||{},{...de}))}),re){let{backgroundColor:qe="white",hoverBackgroundColor:We="#F2F2F2",color:Ie="rgba(0, 0, 0, 0.87)",hoverColor:de="rgba(0, 0, 0, 0.87)",borderColor:Pe="rgba(0, 0, 0, 0.87)",hoverBorderColor:Ke="rgba(0, 0, 0, 0.87)",borderRadius:Qe="4px 0 0 4px",borderWidth:Sn="1px",iconSize:Co=20,padding:yn="8px 12px",...Yt}=L||{},Tn=Yt["&:hover"]||{};delete Yt["&:hover"],re={minWidth:"unset",backgroundColor:qe,color:Ie,borderColor:Pe,borderRadius:Qe,fontSize:`${Co}px`,borderWidth:Sn,borderStyle:"solid",position:"relative",padding:yn,iconSize:Co,transition:"unset","&:hover":{color:de,backgroundColor:We,borderColor:Ke,...Tn},...Yt}}if(Ze){let{backgroundColor:qe="white",hoverBackgroundColor:We="#F2F2F2",color:Ie="rgba(0, 0, 0, 0.87)",hoverColor:de="rgba(0, 0, 0, 0.87)",borderColor:Pe="rgba(0, 0, 0, 0.87)",hoverBorderColor:Ke="rgba(0, 0, 0, 0.87)",borderRadius:Qe="0 4px 4px 0",borderWidth:Sn="1px",iconSize:Co=20,padding:yn="8px 4px",...Yt}=Q||{},Tn=Yt["&:hover"]||{};delete Yt["&:hover"],Ze={minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:qe,color:Ie,borderColor:Pe,borderRadius:Qe,fontSize:`${Co}px`,borderWidth:Sn,borderStyle:"solid",padding:yn,iconSize:Co,borderLeftWidth:"0px","&:hover":{color:de,backgroundColor:We,borderColor:Ke,...Tn},...Yt}}return{ctaButtonSx:re,dropdownButtonSx:Ze,replyDividerStyle:xe}},[u,l,Wt,i,It,N,H,j]),Nt=(0,k.useMemo)(()=>{let L=kt(ae)||{};i.forEach(re=>{let Ze=rt(re.InputAssistantBoxSx);Ze&&Object.assign(L,Ze)});let Q=It?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.08)",xe={boxShadow:`0px 2px 3px 1px ${Q}, 1px 0px 2px 0px ${Q}, -1px 0px 2px 0px ${Q}`,...L?.["&:hover"]};return xe&&delete L["&:hover"],{...Tt?xe:{},...L}},[s,Tt,i,It,ae]);(0,k.useEffect)(()=>{P(document.querySelector(`#${Ei}`)?.shadowRoot?.querySelector("div"))},[]);let[Fe,Ht]=(0,k.useState)(null);return(0,k.useEffect)(()=>{if(Ht(a?.querySelector("div:first-of-type")),a){let L=document.createElement("style");a.appendChild(L),me.current=jo({key:"max-ai-input-assistant-context-menu",prepend:!0,container:L})}},[a]),k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{key:T,style:{height:"inherit",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4px",...Nt},onMouseEnter:()=>st(!0),onMouseLeave:()=>st(!1)},i[0]&&k.default.createElement(ko,{defaultContextMenuPath:i[0].liteContextMenuRootPath},k.default.createElement(Rn,{rootId:r,root:y,disabled:Ce,onClickContextMenuItem:L=>{E(L.actions,i[0])}},k.default.createElement(I,{style:{width:"100%",height:"inherit",display:"flex",alignItems:"center"},component:"div"},k.default.createElement(To,{placement:t,zIndex:2e6,PopperProps:{container:y},title:i[0]?.tooltip?R(i[0].tooltip):""},k.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",...Ct},onMouseEnter:()=>{zt(!0)},onMouseLeave:()=>{zt(!1)}},me.current&&k.default.createElement(Ut,{value:me.current},k.default.createElement(I,{position:"absolute",top:`-${N?.transparentHeight||0}px`,width:"100%",height:`${N?.transparentHeight||0}px`,bgcolor:$t?"transparent":"red",zIndex:2000001}),k.default.createElement(G,{id:`maxAIInputAssistantCtaButton${r}`,"data-testid":"maxai-input-assistant-cta-button","data-button-key":i[0].liteContextMenuRootPath,disabled:Ce,sx:Pt.ctaButtonSx,onMouseDownCapture:L=>{L.stopPropagation(),L.preventDefault()},onMouseUpCapture:L=>{L.stopPropagation(),L.preventDefault()},onClick:L=>{L.stopPropagation(),L.preventDefault(),E(i[0].actions,i[0])}},Ce?k.default.createElement(rr,{size:Pt.ctaButtonSx?.iconSize||16,sx:{fontSize:"inherit",color:"rgba(125, 125, 125, 0.6)",...Ge||{}}}):k.default.createElement(ua,{sx:{fontSize:"inherit",color:"inherit",...at}}),i[0].displayText&&k.default.createElement(S,{component:"span",fontSize:"14px",sx:i[0].displayTextSx,noWrap:!0},typeof i[0].displayText=="function"?i[0].displayText(R):i[0].displayText)),k.default.createElement(I,{position:"absolute",bottom:`-${N?.transparentHeight||0}px`,width:"100%",height:`${N?.transparentHeight||0}px`,bgcolor:$t?"transparent":"red",zIndex:2000001})))))),i[0].onboardingTooltipSceneType&&me.current&&k.default.createElement(Ut,{value:me.current},i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?k.default.createElement(js,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Fe,container:Fe}):i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON"?k.default.createElement(Rs,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Fe,container:Fe}):k.default.createElement(Xn,{container:Fe,sceneType:i[0].onboardingTooltipSceneType}))),d&&k.default.createElement("div",{style:{display:"flex",height:"70%",width:"1px",flexShrink:0,backgroundColor:"rgba(0, 0, 0, 0.12)",...Pt.replyDividerStyle}}),i[1]&&k.default.createElement(ko,{defaultContextMenuPath:i[1].liteContextMenuRootPath},k.default.createElement(Rn,{rootId:r,root:y,disabled:Ce,onClickContextMenuItem:L=>{E(L.actions,i[1])}},k.default.createElement(I,null,k.default.createElement(To,{placement:t,zIndex:2e6,PopperProps:{container:y},title:i[1]?.tooltip?R(i[1].tooltip):""},k.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer"}},me.current&&k.default.createElement(Ut,{value:me.current},k.default.createElement(I,{position:"absolute",top:`-${H?.transparentHeight||0}px`,width:"100%",height:`${H?.transparentHeight||0}px`,bgcolor:$t?"transparent":"red",zIndex:2000001}),k.default.createElement(I,{id:`maxAIInputAssistantDropdownButton${r}`,"data-testid":"maxai-input-assistant-dropdown-button","data-button-key":i[1].liteContextMenuRootPath,sx:{...Pt.dropdownButtonSx,...Ce?{pointerEvents:"none",cursor:"not-allowed"}:{}}},k.default.createElement(te,{icon:"Rewrite",sx:{fontSize:"inherit",color:"inherit"}})),k.default.createElement(I,{position:"absolute",bottom:`-${H?.transparentHeight||0}px`,width:"100%",height:`${H?.transparentHeight||0}px`,bgcolor:$t?"transparent":"red",zIndex:2000001})))))),i[1].onboardingTooltipSceneType&&me.current?k.default.createElement(Ut,{value:me.current},k.default.createElement(Xn,{container:Fe,sceneType:i[1].onboardingTooltipSceneType})):null),k.default.createElement(wr,null,k.default.createElement("span",{style:{all:"inherit"}},"id:",o.config.id))))},Gs=im;var am=()=>{let{appSettings:e}=or(),[o,t]=(0,Ne.useState)([]),r=(0,Ne.useMemo)(()=>new ms,[]);(0,Ne.useEffect)(()=>(r.createInputAssistantButtonListener(t),()=>{r.destroy()}),[r]);let n=(0,Ne.useMemo)(()=>{let i=rs();return i==="mail.google.com"?e.userSettings?.inputAssistantButton?.gmail===!0:i==="outlook.live.com"||i==="outlook.office.com"||i==="outlook.office365.com"?e.userSettings?.inputAssistantButton?.outlook===!0:i==="twitter.com"?e.userSettings?.inputAssistantButton?.twitter===!0:i==="linkedin.com"?e.userSettings?.inputAssistantButton?.linkedIn===!0:i==="facebook.com"?e.userSettings?.inputAssistantButton?.facebook===!0:i==="youtube.com"||i==="studio.youtube.com"?e.userSettings?.inputAssistantButton?.youtube===!0:i==="instagram.com"?e.userSettings?.inputAssistantButton?.instagram===!0:i==="discord.com"?e.userSettings?.inputAssistantButton?.discord===!0:i==="app.slack.com"?e.userSettings?.inputAssistantButton?.slack===!0:i==="web.whatsapp.com"?e.userSettings?.inputAssistantButton?.whatsApp===!0:i==="web.telegram.org"?e.userSettings?.inputAssistantButton?.telegram===!0:i==="messenger.com"?e.userSettings?.inputAssistantButton?.messenger===!0:!1},[e.userSettings?.inputAssistantButton]);return(0,Ne.useEffect)(()=>{n?r.continue():r.pause()},[r,n]),Ne.default.createElement(Ne.default.Fragment,null,o.map(i=>(0,Zs.createPortal)(Ne.default.createElement(Gs,{observerData:i,key:i.id}),i.renderRootElement,i.id)))},qs=am;var Ar=(e=!1)=>{let o=e?"rgba(255, 255, 255, 0.87)":"rgba(0, 0, 0, 0.87)",t=e?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)";return e?{frame:"#333",tabBackground:"#333",tabBackgroundInactive:"#222",tabBackgroundHover:"rgba(255, 255, 255, 0.08)",tabText:o,tabTextInactive:t}:{frame:"#fff",tabBackground:"#fff",tabBackgroundInactive:"#eee",tabBackgroundHover:"rgba(0, 0, 0, 0.08)",tabText:o,tabTextInactive:t}};var jn=g(v()),Ae=(0,jn.createContext)({theme:Ar(!1),maxAIBrowserWindows:[]}),Ks=(0,jn.createContext)({tabId:"",tabData:null});var wt=g(v());var kr=g(v()),Gn=(0,kr.createContext)({controller:Ja,title:"",sources:[]}),so=()=>(0,kr.useContext)(Gn);var Br=g(v()),sm=e=>{let{sx:o}=e,{sources:t,controller:r}=so();return Br.default.createElement(b,{position:"relative",width:"100%",flex:1,height:0,p:1,overflow:"hidden",sx:{alignItems:"center",justifyContent:"center",boxSizing:"border-box",...o}},Br.default.createElement("audio",{controls:!0,ref:n=>{r.setAudioPlayer(n)}},t.map(n=>Br.default.createElement("source",{key:n,src:n})),"Your browser does not support the audio element"))},Qs=sm;var Mr=g(v());var Lo=g(v());var lm=e=>{let{t:o}=A(),[t,r]=(0,Lo.useState)(!1),{title:n,sources:i}=so(),{download:a}=Fs(),s=async()=>{if(!t&&i?.length){r(!0);try{for(let l=0;l<i.length;l++){let u=i[l],p=n||"audio.mp3",d=i.length===1?p:ji(p,`_${l+1}`);await a({fileLink:u,fileName:d})}}catch{}finally{r(!1)}}};return Lo.default.createElement(Se,{title:o(t?"package__common:downloading":"package__common:download"),onClick:s,...e},Lo.default.createElement(te,{sx:{fontSize:"20px",scale:t?"0.8":"1"},icon:t?"Loading":"FileDownload"}))},Er=lm;var pm=e=>{let{sx:o,hideTools:t,...r}=e,{title:n}=so();return Mr.default.createElement(ye,{icon:Mr.default.createElement(ro,{documentType:"audio"}),title:n,sx:o,...r},!t&&Mr.default.createElement(Er,null))},Js=pm;var ke=g(v());var Zn=g(v());var um=e=>{let{sx:o,...t}=e;return Zn.default.createElement(gt,{sx:o,...t},Zn.default.createElement(Er,null))},el=um;var mm=e=>{let{controller:o,title:t,sources:r,titleBarProps:n,toolbarProps:i,hideTitleBar:a,hideToolbar:s,onLoadStart:l,onLoadSuccess:u,sx:p}=e,d=(0,ke.useMemo)(()=>o||new Qa,[o]);(0,ke.useEffect)(()=>{l?.(d),u?.()},[]);let f=(0,ke.useMemo)(()=>({controller:d,title:t||"",sources:r}),[d,r,t]),{isFreeze:h,resetFreeze:c,enableFreeze:m,disableFreeze:x}=ct();return ke.default.createElement(Gn.Provider,{value:f},ke.default.createElement(b,{width:"100%",height:"100%",sx:p,onMouseMove:c},!a&&ke.default.createElement(Js,{hideTools:!s,...n}),ke.default.createElement(b,{position:"relative",width:"100%",flex:1,height:0},ke.default.createElement(Qs,null),!s&&ke.default.createElement(el,{freeze:h,enableFreeze:m,disableFreeze:x,...i}))))},tl=ke.default.memo(mm);var Be=g(v());var Lr=g(v()),qn=(0,Lr.createContext)({controller:ra,documentType:"chat_file",loading:!0}),po=()=>(0,Lr.useContext)(qn);var Do=g(v()),ol=g(qu()),dm=e=>{let{lang:o,content:t,sx:r,...n}=e,{isDarkMode:i}=_e(),a=(0,Do.useMemo)(()=>Do.default.createElement(ol.default,{className:o},t),[o,t]);return Do.default.createElement(b,{className:`maxai-document--code-viewer ${i?"dark":""}`,width:"100%",height:"100%",p:1,sx:{overflowY:"auto",textAlign:"left",userSelect:"text!important","& > pre":{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",padding:0},"& > pre code":{padding:"0 !important",background:"none !important"},...r},...n},a)},rl=dm;var Dr=g(v()),cm=e=>{let{content:o,sx:t,...r}=e,{isDarkMode:n}=_e();return Dr.default.createElement(b,{className:"chat-message--text",width:"100%",height:"100%",p:1,sx:{overflowY:"auto",...t},...r},Dr.default.createElement(I,{className:`markdown-body ${n?"markdown-body-dark":""}`},Dr.default.createElement(ts,null,o.replace(/^\s+/,""))))},Or=cm;var Oo=g(v());var we=g(v());var fm=1e3,hm=e=>{let{data:o,index:t,style:r}=e,{chunks:n,onSetItemHeight:i}=o,a=(0,we.useRef)(null);return(0,we.useEffect)(()=>{a.current&&i(t,a.current.clientHeight)},[t]),we.default.createElement(I,{key:t,sx:r,component:"div"},we.default.createElement(S,{component:"p",ref:a},n[t]))},gm=e=>{let{text:o,chunkSize:t=fm,sx:r}=e,n=(0,we.useRef)({}),i=(0,we.useRef)(null),a=(0,we.useCallback)((l,u)=>{n.current[l]=u,i.current&&i.current.resetAfterIndex(l)},[]),s=(0,we.useMemo)(()=>{let l=[],u=0;for(;u<o.length;){let p=u+t,d=o.slice(u,p),f=o.slice(p).indexOf(`
`);if(f===-1){l.push(o.slice(u));break}else d+=o.slice(p,p+f),u=p+f+1,l.push(d)}return{chunks:l,onSetItemHeight:a}},[o,t]);return we.default.createElement(b,{sx:{width:"100%",height:0,flex:1,position:"relative",...r}},we.default.createElement(vs,{height:0,style:{flex:1},className:"large-text-box",ref:i,itemCount:s.chunks.length,itemSize:l=>n.current[l]||200,width:"100%",itemData:s},hm))},nl=gm;var bm=e=>{let{fileName:o,fileText:t,fileType:r}=e;return La({name:o,type:r})?.documentType==="chat_file_code"?Oo.default.createElement(rl,{lang:Ri(o.split(".").pop()||""),content:t}):Yi({name:o,type:r},[".md"])?Oo.default.createElement(Or,{content:t}):Oo.default.createElement(b,{width:"100%",height:"100%",p:1},Oo.default.createElement(nl,{chunkSize:4e3,text:t,sx:{mt:1,"& p":{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"14px",color:"text.primary",textAlign:"left",lineHeight:"20px"}}}))},il=bm;var Fr=g(v());var al=g(v());var xm=e=>{let{sx:o,...t}=e,{controller:r,fileName:n}=po(),i=n||"MaxAI";return al.default.createElement(ao,{file:r.file,fileName:i,sx:o,...t})},Vr=xm;var vm=e=>{let{hideTools:o,sx:t,...r}=e,{documentType:n,loading:i,fileName:a}=po();return Fr.default.createElement(ye,{icon:Fr.default.createElement(ro,{documentType:n}),title:a,loading:i,sx:t,...r},!o&&Fr.default.createElement(Vr,null))},sl=vm;var Wr=g(v());var uo=g(v()),ll=g(Ru());var wm=e=>{let{sx:o,...t}=e,{t:r}=A(),[n,i]=(0,uo.useState)(!1),{fileText:a}=po(),s=r(n?"package__common:copied":"package__features:chat__chat_message__copy_to_clipboard");return uo.default.createElement(ll.CopyToClipboard,{text:a||"",options:{message:"Copied!",format:"text/plain"},onCopy:()=>{i(!0),setTimeout(()=>{i(!1)},1e3)}},uo.default.createElement(Ao,{title:s,sx:o,...t},uo.default.createElement(te,{icon:"CopyTextOnly",sx:{fontSize:22}})))},pl=wm;var Cm=e=>{let{sx:o,...t}=e;return Wr.default.createElement(gt,{sx:o,...t},Wr.default.createElement(pl,null),Wr.default.createElement(Vr,null))},ul=Cm;var _m=e=>{let{controller:o,documentType:t,file:r,fileName:n,fileSize:i,fileType:a,titleBarProps:s,toolbarProps:l,hideTitleBar:u,hideToolbar:p,onLoadStart:d,onLoadSuccess:f,onLoadError:h,sx:c}=e,m=(0,Be.useMemo)(()=>o||new oa,[o]),{loading:x,progress:w,error:_,fileName:C,fileType:y,fileSize:P,fileText:B}=Ga(r,{fileName:n,fileSize:i,fileType:a,loadFileText:!0,onLoadStart(){d?.(m)},onLoadSuccess({file:j}){m.setFile(j),setTimeout(()=>{f?.()},100)},onLoadError(j){h?.(j)},onLoadReset(){m.reset()}}),E=(0,Be.useMemo)(()=>{let j=t;return j==="chat_file"&&(j=dr({name:C,type:y})),{controller:m,documentType:j||"chat_file",loading:x,fileName:C,fileSize:P,fileType:y,fileText:B}},[m,t,x,C,P,y,B]),{isFreeze:T,resetFreeze:U,disableFreeze:D,enableFreeze:N}=ct();!_&&w===100&&(E.documentType,"chat_file_code",E.documentType,"chat_file_excel");let H=()=>_?Be.default.createElement(S,{color:"text.primary"},"Something error, please select other File"):w!==100?Be.default.createElement(Ws,{documentType:E.documentType,title:C,fileSize:P,progress:w}):Be.default.createElement(il,{fileText:B,fileName:C,fileSize:P,fileType:y}),ae=()=>p||w!==100?null:Be.default.createElement(ul,{freeze:T,disableFreeze:D,enableFreeze:N,...l});return Be.default.createElement(qn.Provider,{value:E},Be.default.createElement(b,{width:"100%",height:"100%",sx:c,onMouseMove:U},!u&&Be.default.createElement(sl,{hideTools:!p,...s}),Be.default.createElement(b,{ref:j=>m.setContainerElement(j),position:"relative",width:"100%",flex:1,height:0,p:1,overflow:"hidden",justifyContent:"center",alignItems:"center"},H(),ae())))},ml=Be.default.memo(_m);var he=g(v());var zr=g(v()),Kn=(0,zr.createContext)({controller:ia,loading:!0,src:""}),bt=()=>(0,zr.useContext)(Kn);var Rr=g(v());var X=g(v()),He=function(e,o){return Number(e.toFixed(o))},Sm=function(e,o){return typeof e=="number"?e:o},q=function(e,o,t){t&&typeof t=="function"&&t(e,o)},ym=function(e){return-Math.cos(e*Math.PI)/2+.5},Tm=function(e){return e},Im=function(e){return e*e},Pm=function(e){return e*(2-e)},Am=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},km=function(e){return e*e*e},Bm=function(e){return--e*e*e+1},Em=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},Mm=function(e){return e*e*e*e},Lm=function(e){return 1- --e*e*e*e},Dm=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Om=function(e){return e*e*e*e*e},Vm=function(e){return 1+--e*e*e*e*e},Fm=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},wl={easeOut:ym,linear:Tm,easeInQuad:Im,easeOutQuad:Pm,easeInOutQuad:Am,easeInCubic:km,easeOutCubic:Bm,easeInOutCubic:Em,easeInQuart:Mm,easeOutQuart:Lm,easeInOutQuart:Dm,easeInQuint:Om,easeOutQuint:Vm,easeInOutQuint:Fm},Cl=function(e){typeof e=="number"&&cancelAnimationFrame(e)},xt=function(e){e.mounted&&(Cl(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function _l(e,o,t,r){if(e.mounted){var n=new Date().getTime(),i=1;xt(e),e.animation=function(){if(!e.mounted)return Cl(e.animation);var a=new Date().getTime()-n,s=a/t,l=wl[o],u=l(s);a>=t?(r(i),e.animation=null):e.animation&&(r(u),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Wm(e){var o=e.scale,t=e.positionX,r=e.positionY;return!(Number.isNaN(o)||Number.isNaN(t)||Number.isNaN(r))}function Dt(e,o,t,r){var n=Wm(o);if(!(!e.mounted||!n)){var i=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,u=a.positionY,p=o.scale-s,d=o.positionX-l,f=o.positionY-u;t===0?i(o.scale,o.positionX,o.positionY):_l(e,r,t,function(h){var c=s+p*h,m=l+d*h,x=u+f*h;i(c,m,x)})}}function zm(e,o,t){var r=e.offsetWidth,n=e.offsetHeight,i=o.offsetWidth,a=o.offsetHeight,s=i*t,l=a*t,u=r-s,p=n-l;return{wrapperWidth:r,wrapperHeight:n,newContentWidth:s,newDiffWidth:u,newContentHeight:l,newDiffHeight:p}}var Nm=function(e,o,t,r,n,i,a){var s=e>o?t*(a?1:.5):0,l=r>n?i*(a?1:.5):0,u=e-o-s,p=s,d=r-n-l,f=l;return{minPositionX:u,maxPositionX:p,minPositionY:d,maxPositionY:f}},ni=function(e,o){var t=e.wrapperComponent,r=e.contentComponent,n=e.setup.centerZoomedOut;if(!t||!r)throw new Error("Components are not mounted");var i=zm(t,r,o),a=i.wrapperWidth,s=i.wrapperHeight,l=i.newContentWidth,u=i.newDiffWidth,p=i.newContentHeight,d=i.newDiffHeight,f=Nm(a,l,u,s,p,d,!!n);return f},ei=function(e,o,t,r){return r?e<o?He(o,2):e>t?He(t,2):He(e,2):He(e,2)},mo=function(e,o){var t=ni(e,o);return e.bounds=t,t};function Fo(e,o,t,r,n,i,a){var s=t.minPositionX,l=t.minPositionY,u=t.maxPositionX,p=t.maxPositionY,d=0,f=0;a&&(d=n,f=i);var h=ei(e,s-d,u+d,r),c=ei(o,l-f,p+f,r);return{x:h,y:c}}function Yr(e,o,t,r,n,i){var a=e.transformState,s=a.scale,l=a.positionX,u=a.positionY,p=r-s;if(typeof o!="number"||typeof t!="number")return{x:l,y:u};var d=l-o*p,f=u-t*p,h=Fo(d,f,n,i,0,0,null);return h}function Wo(e,o,t,r,n){var i=n?r:0,a=o-i;return!Number.isNaN(t)&&e>=t?t:!Number.isNaN(o)&&e<=a?a:e}var dl=function(e,o){var t=e.setup.panning.excluded,r=e.isInitialized,n=e.wrapperComponent,i=o.target,a="shadowRoot"in i&&"composedPath"in o,s=a?o.composedPath().some(function(p){return p instanceof Element?n?.contains(p):!1}):n?.contains(i),l=r&&i&&s;if(!l)return!1;var u=Ur(i,t);return!u},cl=function(e){var o=e.isInitialized,t=e.isPanning,r=e.setup,n=r.panning.disabled,i=o&&t&&!n;return!!i},Hm=function(e,o){var t=e.transformState,r=t.positionX,n=t.positionY;e.isPanning=!0;var i=o.clientX,a=o.clientY;e.startCoords={x:i-r,y:a-n}},Ym=function(e,o){var t=o.touches,r=e.transformState,n=r.positionX,i=r.positionY;e.isPanning=!0;var a=t.length===1;if(a){var s=t[0].clientX,l=t[0].clientY;e.startCoords={x:s-n,y:l-i}}};function Um(e){var o=e.transformState,t=o.positionX,r=o.positionY,n=o.scale,i=e.setup,a=i.disabled,s=i.limitToBounds,l=i.centerZoomedOut,u=e.wrapperComponent;if(!(a||!u||!e.bounds)){var p=e.bounds,d=p.maxPositionX,f=p.minPositionX,h=p.maxPositionY,c=p.minPositionY,m=t>d||t<f,x=r>h||r<c,w=t>d?u.offsetWidth:e.setup.minPositionX||0,_=r>h?u.offsetHeight:e.setup.minPositionY||0,C=Yr(e,w,_,n,e.bounds,s||l),y=C.x,P=C.y;return{scale:n,positionX:m?y:t,positionY:x?P:r}}}function Sl(e,o,t,r,n){var i=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,u=l.scale,p=l.positionX,d=l.positionY;if(!(a===null||s===null||o===p&&t===d)){var f=Fo(o,t,s,i,r,n,a),h=f.x,c=f.y;e.setTransformState(u,h,c)}}var Xm=function(e,o,t){var r=e.startCoords,n=e.transformState,i=e.setup.panning,a=i.lockAxisX,s=i.lockAxisY,l=n.positionX,u=n.positionY;if(!r)return{x:l,y:u};var p=o-r.x,d=t-r.y,f=a?l:p,h=s?u:d;return{x:f,y:h}},Lt=function(e,o){var t=e.setup,r=e.transformState,n=r.scale,i=t.minScale,a=t.disablePadding;return o>0&&n>=i&&!a?o:0},$m=function(e){var o=e.mounted,t=e.setup,r=t.disabled,n=t.velocityAnimation,i=e.transformState.scale,a=n.disabled,s=!a||i>1||!r||o;return!!s},Rm=function(e){var o=e.mounted,t=e.velocity,r=e.bounds,n=e.setup,i=n.disabled,a=n.velocityAnimation,s=e.transformState.scale,l=a.disabled,u=!l||s>1||!i||o;return!(!u||!t||!r)};function jm(e,o){var t=e.setup.velocityAnimation,r=t.equalToMove,n=t.animationTime,i=t.sensitivity;return r?n*o*i:n}function fl(e,o,t,r,n,i,a,s,l,u){if(n){if(o>a&&t>a){var p=a+(e-a)*u;return p>l?l:p<a?a:p}if(o<i&&t<i){var p=i+(e-i)*u;return p<s?s:p>i?i:p}}return r?o:ei(e,i,a,n)}function Gm(e,o){var t=1;return o?Math.min(t,e.offsetWidth/window.innerWidth):t}function Zm(e,o){var t=$m(e);if(t){var r=e.lastMousePosition,n=e.velocityTime,i=e.setup,a=e.wrapperComponent,s=i.velocityAnimation.equalToMove,l=Date.now();if(r&&n&&a){var u=Gm(a,s),p=o.x-r.x,d=o.y-r.y,f=p/u,h=d/u,c=l-n,m=p*p+d*d,x=Math.sqrt(m)/c;e.velocity={velocityX:f,velocityY:h,total:x}}e.lastMousePosition=o,e.velocityTime=l}}function qm(e){var o=e.velocity,t=e.bounds,r=e.setup,n=e.wrapperComponent,i=Rm(e);if(!(!i||!o||!t||!n)){var a=o.velocityX,s=o.velocityY,l=o.total,u=t.maxPositionX,p=t.minPositionX,d=t.maxPositionY,f=t.minPositionY,h=r.limitToBounds,c=r.alignmentAnimation,m=r.zoomAnimation,x=r.panning,w=x.lockAxisY,_=x.lockAxisX,C=m.animationType,y=c.sizeX,P=c.sizeY,B=c.velocityAlignmentTime,E=B,T=jm(e,l),U=Math.max(T,E),D=Lt(e,y),N=Lt(e,P),H=D*n.offsetWidth/100,ae=N*n.offsetHeight/100,j=u+H,Ge=p-H,at=d+ae,Ct=f-ae,me=e.transformState,R=new Date().getTime();_l(e,C,U,function(Ce){var Wt=e.transformState,zt=Wt.scale,Tt=Wt.positionX,st=Wt.positionY,It=new Date().getTime()-R,Pt=It/E,Nt=wl[c.animationType],Fe=1-Nt(Math.min(1,Pt)),Ht=1-Ce,L=Tt+a*Ht,Q=st+s*Ht,xe=fl(L,me.positionX,Tt,_,h,p,u,Ge,j,Fe),re=fl(Q,me.positionY,st,w,h,f,d,Ct,at,Fe);(Tt!==L||st!==Q)&&e.setTransformState(zt,xe,re)})}}function hl(e,o){var t=e.transformState.scale;xt(e),mo(e,t),window.TouchEvent!==void 0&&o instanceof TouchEvent?Ym(e,o):Hm(e,o)}function yl(e){var o=e.transformState.scale,t=e.setup,r=t.minScale,n=t.alignmentAnimation,i=n.disabled,a=n.sizeX,s=n.sizeY,l=n.animationTime,u=n.animationType,p=i||o<r||!a&&!s;if(!p){var d=Um(e);d&&Dt(e,d,l,u)}}function gl(e,o,t){var r=e.startCoords,n=e.setup,i=n.alignmentAnimation,a=i.sizeX,s=i.sizeY;if(r){var l=Xm(e,o,t),u=l.x,p=l.y,d=Lt(e,a),f=Lt(e,s);Zm(e,{x:u,y:p}),Sl(e,u,p,d,f)}}function Km(e){if(e.isPanning){var o=e.setup.panning.velocityDisabled,t=e.velocity,r=e.wrapperComponent,n=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var i=r?.getBoundingClientRect(),a=n?.getBoundingClientRect(),s=i?.width||0,l=i?.height||0,u=a?.width||0,p=a?.height||0,d=s<u||l<p,f=!o&&t&&t?.total>.1&&d;f?qm(e):yl(e)}}function ii(e,o,t,r){var n=e.setup,i=n.minScale,a=n.maxScale,s=n.limitToBounds,l=Wo(He(o,2),i,a,0,!1),u=mo(e,l),p=Yr(e,t,r,l,u,s),d=p.x,f=p.y;return{scale:l,positionX:d,positionY:f}}function Tl(e,o,t){var r=e.transformState.scale,n=e.wrapperComponent,i=e.setup,a=i.minScale,s=i.limitToBounds,l=i.zoomAnimation,u=l.disabled,p=l.animationTime,d=l.animationType,f=u||r>=a;if((r>=1||s)&&yl(e),!(f||!n||!e.mounted)){var h=o||n.offsetWidth/2,c=t||n.offsetHeight/2,m=ii(e,a,h,c);m&&Dt(e,m,p,d)}}var Mt=function(){return Mt=Object.assign||function(o){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},Mt.apply(this,arguments)};function bl(e,o,t){if(t||arguments.length===2)for(var r=0,n=o.length,i;r<n;r++)(i||!(r in o))&&(i||(i=Array.prototype.slice.call(o,0,r)),i[r]=o[r]);return e.concat(i||Array.prototype.slice.call(o))}var Nr={previousScale:1,scale:1,positionX:0,positionY:0},Vo={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ti={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Il=function(e){var o,t,r,n;return{previousScale:(o=e.initialScale)!==null&&o!==void 0?o:Nr.scale,scale:(t=e.initialScale)!==null&&t!==void 0?t:Nr.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:Nr.positionX,positionY:(n=e.initialPositionY)!==null&&n!==void 0?n:Nr.positionY}},xl=function(e){var o=Mt({},Vo);return Object.keys(e).forEach(function(t){var r=typeof e[t]<"u",n=typeof Vo[t]<"u";if(n&&r){var i=Object.prototype.toString.call(Vo[t]),a=i==="[object Object]",s=i==="[object Array]";a?o[t]=Mt(Mt({},Vo[t]),e[t]):s?o[t]=bl(bl([],Vo[t],!0),e[t],!0):o[t]=e[t]}}),o},Pl=function(e,o,t){var r=e.transformState.scale,n=e.wrapperComponent,i=e.setup,a=i.maxScale,s=i.minScale,l=i.zoomAnimation,u=i.smooth,p=l.size;if(!n)throw new Error("Wrapper is not mounted");var d=u?r*Math.exp(o*t):r+o*t,f=Wo(He(d,3),s,a,p,!1);return f};function Al(e,o,t,r,n){var i=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,u=a.positionY;if(i){var p=i.offsetWidth,d=i.offsetHeight,f=(p/2-l)/s,h=(d/2-u)/s,c=Pl(e,o,t),m=ii(e,c,f,h);m&&Dt(e,m,r,n)}}function kl(e,o,t,r){var n=e.setup,i=e.wrapperComponent,a=n.limitToBounds,s=Il(e.props),l=e.transformState,u=l.scale,p=l.positionX,d=l.positionY;if(i){var f=ni(e,s.scale),h=Fo(s.positionX,s.positionY,f,a,0,0,i),c={scale:s.scale,positionX:h.x,positionY:h.y};u===s.scale&&p===s.positionX&&d===s.positionY||(r?.(),Dt(e,c,o,t))}}function Qm(e,o,t,r){var n=e.getBoundingClientRect(),i=o.getBoundingClientRect(),a=t.getBoundingClientRect(),s=i.x*r.scale,l=i.y*r.scale;return{x:(n.x-a.x+s)/r.scale,y:(n.y-a.y+l)/r.scale}}function Jm(e,o,t){var r=e.wrapperComponent,n=e.contentComponent,i=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,u=a.maxScale;if(!r||!n)return i;var p=r.getBoundingClientRect(),d=o.getBoundingClientRect(),f=Qm(o,r,n,i),h=f.x,c=f.y,m=d.width/i.scale,x=d.height/i.scale,w=r.offsetWidth/m,_=r.offsetHeight/x,C=Wo(t||Math.min(w,_),l,u,0,!1),y=(p.width-m*C)/2,P=(p.height-x*C)/2,B=(p.left-h)*C+y,E=(p.top-c)*C+P,T=ni(e,C),U=Fo(B,E,T,s,0,0,r),D=U.x,N=U.y;return{positionX:D,positionY:N,scale:C}}var ed=function(e){return function(o,t,r){o===void 0&&(o=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),Al(e,1,o,t,r)}},td=function(e){return function(o,t,r){o===void 0&&(o=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),Al(e,-1,o,t,r)}},od=function(e){return function(o,t,r,n,i){n===void 0&&(n=300),i===void 0&&(i="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,u=a.scale,p=e.wrapperComponent,d=e.contentComponent,f=e.setup.disabled;if(!(f||!p||!d)){var h={positionX:Number.isNaN(o)?s:o,positionY:Number.isNaN(t)?l:t,scale:Number.isNaN(r)?u:r};Dt(e,h,n,i)}}},rd=function(e){return function(o,t){o===void 0&&(o=200),t===void 0&&(t="easeOut"),kl(e,o,t)}},nd=function(e){return function(o,t,r){t===void 0&&(t=200),r===void 0&&(r="easeOut");var n=e.transformState,i=e.wrapperComponent,a=e.contentComponent;if(i&&a){var s=Bl(o||n.scale,i,a);Dt(e,s,t,r)}}},id=function(e){return function(o,t,r,n){r===void 0&&(r=600),n===void 0&&(n="easeOut"),xt(e);var i=e.wrapperComponent,a=typeof o=="string"?document.getElementById(o):o;if(i&&a&&i.contains(a)){var s=Jm(e,a,t);Dt(e,s,r,n)}}},oi=function(e){return{instance:e,zoomIn:ed(e),zoomOut:td(e),setTransform:od(e),resetTransform:rd(e),centerView:nd(e),zoomToElement:id(e)}},ad=function(e){return{instance:e,state:e.transformState}},Y=function(e){var o={};return Object.assign(o,ad(e)),Object.assign(o,oi(e)),o},Qn=!1;function Jn(){try{var e={get passive(){return Qn=!0,!1}};return e}catch{return Qn=!1,Qn}}var Hr=".".concat(ti.wrapperClass),Ur=function(e,o){return o.some(function(t){return e.matches("".concat(Hr," ").concat(t,", ").concat(Hr," .").concat(t,", ").concat(Hr," ").concat(t," *, ").concat(Hr," .").concat(t," *"))})},ri=function(e){e&&clearTimeout(e)},sd=function(e,o,t){return"translate(".concat(e,"px, ").concat(o,"px) scale(").concat(t,")")};var Bl=function(e,o,t){var r=t.offsetWidth*e,n=t.offsetHeight*e,i=(o.offsetWidth-r)/2,a=(o.offsetHeight-n)/2;return{scale:e,positionX:i,positionY:a}};function ld(e){return function(o){e.forEach(function(t){typeof t=="function"?t(o):t!=null&&(t.current=o)})}}var pd=function(e,o){var t=e.setup.wheel,r=t.disabled,n=t.wheelDisabled,i=t.touchPadDisabled,a=t.excluded,s=e.isInitialized,l=e.isPanning,u=o.target,p=s&&!l&&!r&&u;if(!p||n&&!o.ctrlKey||i&&o.ctrlKey)return!1;var d=Ur(u,a);return!d},ud=function(e){return e?e.deltaY<0?1:-1:0};function md(e,o){var t=ud(e),r=Sm(o,t);return r}function El(e,o,t){var r=o.getBoundingClientRect(),n=0,i=0;if("clientX"in e)n=(e.clientX-r.left)/t,i=(e.clientY-r.top)/t;else{var a=e.touches[0];n=(a.clientX-r.left)/t,i=(a.clientY-r.top)/t}return Number.isNaN(n)||Number.isNaN(i),{x:n,y:i}}var dd=function(e,o,t,r,n){var i=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,u=s.minScale,p=s.zoomAnimation,d=s.disablePadding,f=p.size,h=p.disabled;if(!a)throw new Error("Wrapper is not mounted");var c=i+o*t;if(n)return c;var m=r?!1:!h,x=Wo(He(c,3),u,l,f,m&&!d);return x},cd=function(e,o){var t=e.previousWheelEvent,r=e.transformState.scale,n=e.setup,i=n.maxScale,a=n.minScale;return t?r<i||r>a||Math.sign(t.deltaY)!==Math.sign(o.deltaY)||t.deltaY>0&&t.deltaY<o.deltaY||t.deltaY<0&&t.deltaY>o.deltaY||Math.sign(t.deltaY)!==Math.sign(o.deltaY):!1},fd=function(e,o){var t=e.setup.pinch,r=t.disabled,n=t.excluded,i=e.isInitialized,a=o.target,s=i&&!r&&a;if(!s)return!1;var l=Ur(a,n);return!l},hd=function(e){var o=e.setup.pinch.disabled,t=e.isInitialized,r=e.pinchStartDistance,n=t&&!o&&r;return!!n},gd=function(e,o,t){var r=t.getBoundingClientRect(),n=e.touches,i=He(n[0].clientX-r.left,5),a=He(n[0].clientY-r.top,5),s=He(n[1].clientX-r.left,5),l=He(n[1].clientY-r.top,5);return{x:(i+s)/2/o,y:(a+l)/2/o}},Ml=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},bd=function(e,o){var t=e.pinchStartScale,r=e.pinchStartDistance,n=e.setup,i=n.maxScale,a=n.minScale,s=n.zoomAnimation,l=n.disablePadding,u=s.size,p=s.disabled;if(!t||r===null||!o)throw new Error("Pinch touches distance was not provided");if(o<0)return e.transformState.scale;var d=o/r,f=d*t;return Wo(He(f,2),a,i,u,!p&&!l)},xd=160,vd=100,wd=function(e,o){var t=e.props,r=t.onWheelStart,n=t.onZoomStart;e.wheelStopEventTimer||(xt(e),q(Y(e),o,r),q(Y(e),o,n))},Cd=function(e,o){var t=e.props,r=t.onWheel,n=t.onZoom,i=e.contentComponent,a=e.setup,s=e.transformState,l=s.scale,u=a.limitToBounds,p=a.centerZoomedOut,d=a.zoomAnimation,f=a.wheel,h=a.disablePadding,c=a.smooth,m=d.size,x=d.disabled,w=f.step,_=f.smoothStep;if(!i)throw new Error("Component not mounted");o.preventDefault(),o.stopPropagation();var C=md(o,null),y=c?_*Math.abs(o.deltaY):w,P=dd(e,C,y,!o.ctrlKey);if(l!==P){var B=mo(e,P),E=El(o,i,l),T=x||m===0||p||h,U=u&&T,D=Yr(e,E.x,E.y,P,B,U),N=D.x,H=D.y;e.previousWheelEvent=o,e.setTransformState(P,N,H),q(Y(e),o,r),q(Y(e),o,n)}},_d=function(e,o){var t=e.props,r=t.onWheelStop,n=t.onZoomStop;ri(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(Tl(e,o.x,o.y),e.wheelAnimationTimer=null)},vd);var i=cd(e,o);i&&(ri(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,q(Y(e),o,r),q(Y(e),o,n))},xd))},Ll=function(e){for(var o=0,t=0,r=0;r<2;r+=1)o+=e.touches[r].clientX,t+=e.touches[r].clientY;var n=o/2,i=t/2;return{x:n,y:i}},Sd=function(e,o){var t=Ml(o);e.pinchStartDistance=t,e.lastDistance=t,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=Ll(o);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,xt(e)},yd=function(e,o){var t=e.contentComponent,r=e.pinchStartDistance,n=e.wrapperComponent,i=e.transformState.scale,a=e.setup,s=a.limitToBounds,l=a.centerZoomedOut,u=a.zoomAnimation,p=a.alignmentAnimation,d=u.disabled,f=u.size;if(!(r===null||!t)){var h=gd(o,i,t);if(!(!Number.isFinite(h.x)||!Number.isFinite(h.y))){var c=Ml(o),m=bd(e,c),x=Ll(o),w=x.x-(e.pinchLastCenterX||0),_=x.y-(e.pinchLastCenterY||0);if(!(m===i&&w===0&&_===0)){e.pinchLastCenterX=x.x,e.pinchLastCenterY=x.y;var C=mo(e,m),y=d||f===0||l,P=s&&y,B=Yr(e,h.x,h.y,m,C,P),E=B.x,T=B.y;e.pinchMidpoint=h,e.lastDistance=c;var U=p.sizeX,D=p.sizeY,N=Lt(e,U),H=Lt(e,D),ae=E+w,j=T+_,Ge=Fo(ae,j,C,s,N,H,n),at=Ge.x,Ct=Ge.y;e.setTransformState(m,at,Ct)}}}},Td=function(e){var o=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,Tl(e,o?.x,o?.y)},Dl=function(e,o){var t=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;ri(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,q(Y(e),o,t)},r)},Id=function(e,o){var t=e.props,r=t.onZoomStart,n=t.onZoom,i=e.setup.doubleClick,a=i.animationTime,s=i.animationType;q(Y(e),o,r),kl(e,a,s,function(){return q(Y(e),o,n)}),Dl(e,o)};function Pd(e,o){return e==="toggle"?o===1?1:-1:e==="zoomOut"?-1:1}function Ad(e,o){var t=e.setup,r=e.doubleClickStopEventTimer,n=e.transformState,i=e.contentComponent,a=n.scale,s=e.props,l=s.onZoomStart,u=s.onZoom,p=t.doubleClick,d=p.disabled,f=p.mode,h=p.step,c=p.animationTime,m=p.animationType;if(!d&&!r){if(f==="reset")return Id(e,o);if(i){var x=Pd(f,e.transformState.scale),w=Pl(e,x,h);if(a!==w){q(Y(e),o,l);var _=El(o,i,a),C=ii(e,w,_.x,_.y);C&&(q(Y(e),o,u),Dt(e,C,c,m),Dl(e,o))}}}}var kd=function(e,o){var t=e.isInitialized,r=e.setup,n=e.wrapperComponent,i=r.doubleClick,a=i.disabled,s=i.excluded,l=o.target,u=n?.contains(l),p=t&&l&&u&&!a;if(!p)return!1;var d=Ur(l,s);return!d},Bd=function(){function e(o){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(r){t.props=r,mo(t,t.transformState.scale),t.setup=xl(r)},this.initializeWindowEvents=function(){var r,n,i=Jn(),a=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a?.defaultView;(n=t.wrapperComponent)===null||n===void 0||n.addEventListener("wheel",t.onWheelPanning,i),s?.addEventListener("mousedown",t.onPanningStart,i),s?.addEventListener("mousemove",t.onPanning,i),s?.addEventListener("mouseup",t.onPanningStop,i),a?.addEventListener("mouseleave",t.clearPanning,i),s?.addEventListener("keyup",t.setKeyUnPressed,i),s?.addEventListener("keydown",t.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,n,i=Jn(),a=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a?.defaultView;s?.removeEventListener("mousedown",t.onPanningStart,i),s?.removeEventListener("mousemove",t.onPanning,i),s?.removeEventListener("mouseup",t.onPanningStop,i),a?.removeEventListener("mouseleave",t.clearPanning,i),s?.removeEventListener("keyup",t.setKeyUnPressed,i),s?.removeEventListener("keydown",t.setKeyPressed,i),document.removeEventListener("mouseleave",t.clearPanning,i),xt(t),(n=t.observer)===null||n===void 0||n.disconnect()},this.handleInitializeWrapperEvents=function(r){var n=Jn();r.addEventListener("wheel",t.onWheelZoom,n),r.addEventListener("dblclick",t.onDoubleClick,n),r.addEventListener("touchstart",t.onTouchPanningStart,n),r.addEventListener("touchmove",t.onTouchPanning,n),r.addEventListener("touchend",t.onTouchPanningStop,n)},this.handleInitialize=function(r){var n=t.setup.centerOnInit;t.applyTransformation(),t.onInitCallbacks.forEach(function(i){return i(Y(t))}),n&&(t.setCenter(),t.observer=new ResizeObserver(function(){var i,a=r.offsetWidth,s=r.offsetHeight;(a>0||s>0)&&(t.onInitCallbacks.forEach(function(l){return l(Y(t))}),t.setCenter(),(i=t.observer)===null||i===void 0||i.disconnect())}),setTimeout(function(){var i;(i=t.observer)===null||i===void 0||i.disconnect()},5e3),t.observer.observe(r))},this.onWheelZoom=function(r){var n=t.setup.disabled;if(!n){var i=pd(t,r);if(i){var a=t.isPressingKeys(t.setup.wheel.activationKeys);a&&(wd(t,r),Cd(t,r),_d(t,r))}}},this.onWheelPanning=function(r){var n=t.setup,i=n.disabled,a=n.wheel,s=n.panning;if(!(!t.wrapperComponent||!t.contentComponent||i||!a.wheelDisabled||s.disabled||!s.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=t.transformState,u=l.positionX,p=l.positionY,d=u-r.deltaX,f=p-r.deltaY,h=s.lockAxisX?u:d,c=s.lockAxisY?p:f,m=t.setup.alignmentAnimation,x=m.sizeX,w=m.sizeY,_=Lt(t,x),C=Lt(t,w);h===u&&c===p||Sl(t,h,c,_,C)}},this.onPanningStart=function(r){var n=t.setup.disabled,i=t.props.onPanningStart;if(!n){var a=dl(t,r);if(a){var s=t.isPressingKeys(t.setup.panning.activationKeys);s&&(r.button===0&&!t.setup.panning.allowLeftClickPan||r.button===1&&!t.setup.panning.allowMiddleClickPan||r.button===2&&!t.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),xt(t),hl(t,r),q(Y(t),r,i)))}}},this.onPanning=function(r){var n=t.setup.disabled,i=t.props.onPanning;if(!n){var a=cl(t);if(a){var s=t.isPressingKeys(t.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),gl(t,r.clientX,r.clientY),q(Y(t),r,i))}}},this.onPanningStop=function(r){var n=t.props.onPanningStop;t.isPanning&&(Km(t),q(Y(t),r,n))},this.onPinchStart=function(r){var n=t.setup.disabled,i=t.props,a=i.onPinchingStart,s=i.onZoomStart;if(!n){var l=fd(t,r);l&&(Sd(t,r),xt(t),q(Y(t),r,a),q(Y(t),r,s))}},this.onPinch=function(r){var n=t.setup.disabled,i=t.props,a=i.onPinching,s=i.onZoom;if(!n){var l=hd(t);l&&(r.preventDefault(),r.stopPropagation(),yd(t,r),q(Y(t),r,a),q(Y(t),r,s))}},this.onPinchStop=function(r){var n=t.props,i=n.onPinchingStop,a=n.onZoomStop;t.pinchStartScale&&(Td(t),q(Y(t),r,i),q(Y(t),r,a))},this.onTouchPanningStart=function(r){var n=t.setup.disabled,i=t.props.onPanningStart;if(!n){var a=dl(t,r);if(a){var s=t.lastTouch&&+new Date-t.lastTouch<200;if(!s){t.lastTouch=+new Date,xt(t);var l=r.touches,u=l.length===1,p=l.length===2;u&&(xt(t),hl(t,r),q(Y(t),r,i)),p&&t.onPinchStart(r)}}}},this.onTouchPanning=function(r){var n=t.setup.disabled,i=t.props.onPanning;if(t.isPanning&&r.touches.length===1){if(n)return;var a=cl(t);if(!a)return;r.preventDefault(),r.stopPropagation();var s=r.touches[0];gl(t,s.clientX,s.clientY),q(Y(t),r,i)}else r.touches.length>1&&t.onPinch(r)},this.onTouchPanningStop=function(r){t.onPanningStop(r),t.onPinchStop(r)},this.onDoubleClick=function(r){var n=t.setup.disabled;if(!n){var i=kd(t,r);i&&Ad(t,r)}},this.clearPanning=function(r){t.isPanning&&t.onPanningStop(r)},this.setKeyPressed=function(r){t.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){t.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(n){return t.pressedKeys[n]}):!0},this.setTransformState=function(r,n,i){var a=t.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(n)&&!Number.isNaN(i)){r!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=r),t.transformState.positionX=n,t.transformState.positionY=i,t.applyTransformation();var s=Y(t);t.onChangeCallbacks.forEach(function(l){return l(s)}),q(s,{scale:r,positionX:n,positionY:i},a)}},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var r=Bl(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,n,i){return t.props.customTransform?t.props.customTransform(r,n,i):sd(r,n,i)},this.applyTransformation=function(){if(!(!t.mounted||!t.contentComponent)){var r=t.transformState,n=r.scale,i=r.positionX,a=r.positionY,s=t.handleTransformStyles(i,a,n);t.contentComponent.style.transform=s}},this.getContext=function(){return Y(t)},this.onChange=function(r){return t.onChangeCallbacks.has(r)||t.onChangeCallbacks.add(r),function(){t.onChangeCallbacks.delete(r)}},this.onInit=function(r){return t.onInitCallbacks.has(r)||t.onInitCallbacks.add(r),function(){t.onInitCallbacks.delete(r)}},this.init=function(r,n){t.cleanupWindowEvents(),t.wrapperComponent=r,t.contentComponent=n,mo(t,t.transformState.scale),t.handleInitializeWrapperEvents(r),t.handleInitialize(n),t.initializeWindowEvents(),t.isInitialized=!0;var i=Y(t);q(i,void 0,t.props.onInit)},this.props=o,this.setup=xl(this.props),this.transformState=Il(this.props)}return e}(),ai=X.default.createContext(null),Ed=function(e,o){return typeof e=="function"?e(o):e},Ol=X.default.forwardRef(function(e,o){var t=(0,X.useRef)(new Bd(e)).current,r=Ed(e.children,oi(t));return(0,X.useImperativeHandle)(o,function(){return oi(t)},[t]),(0,X.useEffect)(function(){t.update(e)},[t,e]),X.default.createElement(ai.Provider,{value:t},r)}),Tx=X.default.forwardRef(function(e,o){var t=(0,X.useRef)(null),r=(0,X.useContext)(ai);return(0,X.useEffect)(function(){return r.onChange(function(n){if(t.current){var i=0,a=0;t.current.style.transform=r.handleTransformStyles(i,a,1/n.instance.transformState.scale)}})},[r]),X.default.createElement("div",Mt({},e,{ref:ld([t,o])}))});function Md(e,o){o===void 0&&(o={});var t=o.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Ld=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,vl={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Md(Ld);var Vl=function(e){var o=e.children,t=e.wrapperClass,r=t===void 0?"":t,n=e.contentClass,i=n===void 0?"":n,a=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,u=l===void 0?{}:l,p=e.contentProps,d=p===void 0?{}:p,f=(0,X.useContext)(ai),h=f.init,c=f.cleanupWindowEvents,m=(0,X.useRef)(null),x=(0,X.useRef)(null);return(0,X.useEffect)(function(){var w=m.current,_=x.current;return w!==null&&_!==null&&h&&h?.(w,_),function(){c?.()}},[]),X.default.createElement("div",Mt({},u,{ref:m,className:"".concat(ti.wrapperClass," ").concat(vl.wrapper," ").concat(r),style:a}),X.default.createElement("div",Mt({},d,{ref:x,className:"".concat(ti.contentClass," ").concat(vl.content," ").concat(i),style:s}),o))};var Fl=(e,o=100)=>{let t=o/e;return t<.01?t=.01:t>2&&(t=2),t},Xr=(e,o=100)=>o/e,$r=(e,o)=>(o=o||Math.max(window.innerHeight,window.innerWidth)*5,o/e);var Dd=e=>{let{...o}=e,{controller:t,title:r}=bt(),n=fe();se(t,"onChangeImage",n),se(t,"onChangeRotate",n);let i=t.imageData,a=t.currentRotate,s=Math.max(i.originalWidth,i.originalHeight),l=Xr(s),u=$r(s),p=d=>{let{wrapperComponent:f,contentComponent:h}=d.instance;if(!f||!h)return;let c=f.getBoundingClientRect(),m=h.getBoundingClientRect(),x=(m.height-c.height)/2,w=-x,_=(m.width-c.width)/2,C=-_,y=d.state.positionY<0,P=d.state.positionX<0,B=d.state.positionX,E=d.state.positionY;y?E=Math.max(w,E):E=Math.min(x,E),P?B=Math.max(C,B):B=Math.min(_,B),m.height<c.height&&(E=0),m.width<c.width&&(B=0),d.instance.setTransformState(d.state.scale,B,E)};return Rr.default.createElement(Ol,{panning:{velocityDisabled:!0},ref:d=>t.setTransformComponent(d),initialScale:1,minScale:l,maxScale:u,wheel:{smoothStep:.01,step:.9},limitToBounds:!1,onZoom:d=>{t.setCurrentScale(d.state.scale)},onPanning:p,onWheel:p,...o},Rr.default.createElement(Vl,{wrapperStyle:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},contentStyle:{transformOrigin:"50% 50%"}},Rr.default.createElement("img",{src:i.src,alt:r,style:{transform:`rotate(${a}deg)`}})))},Wl=Dd;var jr=g(v());var Od=e=>{let{hideTools:o,sx:t,...r}=e,{src:n,title:i,loading:a}=bt();return jr.default.createElement(ye,{icon:jr.default.createElement("img",{src:n,width:16,height:16,alt:i}),title:i,loading:a,sx:t,...r},!o&&jr.default.createElement(ao,{fileLink:n,fileName:i}))},zl=Od;var jt=g(v());var Hl=g(Nl()),si=g(v());var zd=e=>{let{sx:o,...t}=e,{t:r}=A(),{controller:n}=bt();return si.default.createElement(Se,{title:r("package__features:document__image_viewer__toolbar__rotate"),onClick:()=>{n.setCurrentRotate(n.currentRotate+90)},sx:o,...t},si.default.createElement(Hl.default,{sx:{fontSize:22}}))},Yl=zd;var Zr=g(v());var Nd=e=>{let{sx:o,...t}=e,{controller:r}=bt(),n=fe();se(r,"onChangeImage",n),se(r,"onChangeScale",n),se(r,"onChangeMode",n);let i=Math.max(r.imageData.originalWidth,r.imageData.originalHeight),a=Fl(i),s=Xr(i),l=$r(i);return Zr.default.createElement(Zr.default.Fragment,null,Zr.default.createElement(zs,{scale:r.currentScale,minScale:s,maxScale:l,scaleStep:a,onFitView:()=>r.setCurrentMode("bestFit"),onZoomIn:u=>r.setCurrentScale(u),onZoomOut:u=>r.setCurrentScale(u),sx:o,...t}))},Ul=Nd;var Hd=e=>{let{sx:o,...t}=e,{src:r,title:n}=bt();return jt.default.createElement(gt,{sx:o,...t},jt.default.createElement(Yl,null),jt.default.createElement($n,null),jt.default.createElement(Ul,null),jt.default.createElement($n,null),jt.default.createElement(ao,{fileLink:r,fileName:n}))},Xl=Hd;var Yd=e=>{let{controller:o,src:t,title:r,titleBarProps:n,contentProps:i,toolbarProps:a,hideTitleBar:s,hideToolbar:l,onLoadStart:u,onLoadSuccess:p,onLoadError:d}=e,[f,h]=(0,he.useState)(!0),c=(0,he.useMemo)(()=>o||new na,[o]),m=fe(),x=c.imageData;(0,he.useEffect)(()=>{let B=async()=>{let E=async()=>new Promise(T=>{let U=new Image;U.src=t,U.onload=()=>{c.setImageData({originalWidth:U.width,originalHeight:U.height,src:t}),m(),T(!0)},U.onerror=async()=>{try{let D=await yo.fetch(t,{parse:"blob",method:"GET"});if(D){let N=D.response?.status;if(Ta(N)&&N>=400){T(!1);return}if(D.success){let H=new Image;H.src=URL.createObjectURL(D.data),H.onload=()=>{c.setImageData({originalWidth:H.width,originalHeight:H.height,src:D.data}),m(),T(!0)}}}else T(!1)}catch{T(!1)}}});for(let T=0;T<2;T++)if(await E())return!0;return!1};h(!0),u?.(c),B().then(E=>{E||d?.("Image load failed")}).catch().finally(()=>{h(!1),p?.()})},[t]),(0,he.useEffect)(()=>{x.src&&c.setCurrentMode("bestFit")},[x]);let w=(0,he.useMemo)(()=>({controller:c,loading:f,src:t,title:r}),[c,f,t,r]),{isFreeze:_,resetFreeze:C,disableFreeze:y,enableFreeze:P}=ct();return he.default.createElement(Kn.Provider,{value:w},he.default.createElement(b,{width:"100%",height:"100%",onMouseMove:C},!s&&he.default.createElement(zl,{hideTools:!l,...n}),he.default.createElement(et,{loading:f},he.default.createElement(b,{ref:B=>c.setContainerElement(B),position:"relative",width:"100%",flex:1,height:0,overflow:"hidden"},he.default.createElement(Wl,{...i}),!l&&he.default.createElement(Xl,{freeze:_,disableFreeze:y,enableFreeze:P,...a})))))},$l=Yd;var co=g(v());var qr=g(v());var Ye=g(v()),Rl="maxai-search-results-item-hover-arrow-icon",Xd=e=>{let{searchResult:o}=e,t=ar("maxai-animation-hover-left-bottom-slide-in",{duration:200});return Ye.default.createElement(ga,{sx:{borderRadius:"8px",boxShadow:"none",background:"transparent","&:hover":{cursor:"pointer",bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",[`& .${Rl}`]:{display:"block",...t}}}},Ye.default.createElement(ba,null,Ye.default.createElement(ne,{href:o.url,target:"_blank",underline:"none"},Ye.default.createElement(b,{sx:{gap:"2px",p:"12px"}},Ye.default.createElement(b,{sx:{flexDirection:"row",alignItems:"center",gap:"4px",height:"22px"}},Ye.default.createElement(I,{component:"img",draggable:!1,src:At(o.redirectedUrl||o.url),alt:o.from,sx:{width:"16px",height:"16px",borderRadius:"50%",objectFit:"cover",objectPosition:"center",border:"1px solid",borderColor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"rgba(0, 0, 0, 0.08)"}}),Ye.default.createElement(S,{sx:{fontSize:"12px",fontWeight:"500",lineHeight:"18px",color:"text.secondary"},noWrap:!0},o.from),Ye.default.createElement(Vi,{className:Rl,sx:{display:"none",ml:"auto"}})),Ye.default.createElement(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{gap:"16px"}},Ye.default.createElement(S,{textAlign:"left",sx:{fontSize:"16px",fontWeight:"500",lineHeight:"150%",color:"text.primary"},noWrap:!0},o.title)),Ye.default.createElement(Fa,{maxLine:2,textAlign:"left",sx:{fontSize:"14px",fontWeight:"400",lineHeight:"20px",color:"text.secondary",wordBreak:"break-all"}},o.body)))))},jl=Xd;var $d=e=>{let{searchResults:o}=e,{sources:t=[]}=o;return qr.default.createElement(b,{sx:{maxWidth:"100%",height:"100%",overflow:"hidden",borderRadius:"8px, 8px, 0px, 0px"}},qr.default.createElement(I,{sx:{flex:1,height:"0px",px:"16px",py:"12px",overflowY:"auto"}},t.map((r,n)=>qr.default.createElement(jl,{key:n,searchResult:r}))))},Gl=$d;var li=g(v()),Rd=e=>{let{sx:o,...t}=e,{t:r}=A();return li.default.createElement(ye,{icon:li.default.createElement(Va,{sx:{},icon:"Search"}),title:r("package__features:document__search_results_viewer__title_bar__title"),sx:o,...t})},Zl=Rd;var jd=e=>{let{searchResults:o,titleBarProps:t,hideTitleBar:r,onLoadStart:n,onLoadSuccess:i}=e;return(0,co.useEffect)(()=>{n?.(null),i?.()},[]),co.default.createElement(b,{sx:{maxWidth:"100%",height:"100%",overflow:"hidden",borderRadius:"8px, 8px, 0px, 0px"}},!r&&co.default.createElement(Zl,{...t}),co.default.createElement(Gl,{searchResults:o}))},ql=jd;var le=g(v());var Kr=g(v()),pi=(0,Kr.createContext)({controller:aa,loading:!0,url:""}),fo=()=>(0,Kr.useContext)(pi);var Qr=g(v()),Gd=e=>{let{onLoadSuccess:o,onLoadError:t}=e,{controller:r,url:n,html:i,readabilityMarkdown:a}=fo(),s=fe();return se(r,"onChangeReadingMode",s),Qr.default.createElement(I,{sx:{boxSizing:"border-box",width:"100%",height:0,flex:1,p:1,"& iframe":{width:"100%",height:"100%",border:"none",bgcolor:"rgb(255, 255, 255)"}}},r.isReadingMode&&a?Qr.default.createElement(Or,{content:a}):Qr.default.createElement("iframe",{ref:l=>r.setIframeElement(l),key:n,onLoad:o,onError:t,...i?{srcdoc:i}:{src:n}}))},Kl=Gd;var ui=g(v()),Zd=e=>{let{openLink:o,...t}=e,{t:r}=A(),n={target:"_blank",href:o};return ui.default.createElement(Se,{title:r("package__features:document__document_toolbar__open_link__title"),...t,component:"a",...n},ui.default.createElement(te,{icon:"OpenInNew"}))},Ot=Zd;var Jr=g(v());var qd=e=>{let{hideTools:o,sx:t,...r}=e,{url:n,title:i,loading:a}=fo();return Jr.default.createElement(ye,{icon:Jr.default.createElement("img",{src:At(n),width:16,height:16,alt:i}),title:i,loading:a,sx:t,...r},!o&&Jr.default.createElement(Ot,{openLink:n}))},Ql=qd;var zo=g(v());var Kd=e=>{let{sx:o}=e,{controller:t,url:r,readabilityMarkdown:n}=fo(),i=fe();return se(t,"onChangeReadingMode",i),zo.default.createElement(gt,{sx:o},n&&zo.default.createElement(Se,{onClick:()=>t.setIsReadingMode(!t.isReadingMode),actived:t.isReadingMode},zo.default.createElement(te,{icon:"Article"})),zo.default.createElement(Ot,{openLink:r}))},Jl=Kd;var ep={},Qd=e=>{let{controller:o,url:t,title:r,readabilityMarkdown:n,titleBarProps:i,toolbarProps:a,hideTitleBar:s,hideToolbar:l,onLoadStart:u,onLoadSuccess:p,onLoadError:d}=e,[f,h]=(0,le.useState)(!0),[c,m]=(0,le.useState)(!1),[x,w]=(0,le.useState)(""),_=(0,le.useMemo)(()=>o||new En,[o]),C=_t(!1);(0,le.useEffect)(()=>(w(""),()=>{C.current=!0}),[t]);let y=async()=>{if(!t||x)return;if(ki().name==="Chrome"&&t.startsWith("https://developer.chrome.com")){let j=await eo.proxyFetch(t,{method:"GET",parse:"text"});j?.success&&j.data&&w(j.data);return}if(!_.iframeElement||ep[t]||!ea())return;let ae=await Oa.pingWebpage(_.iframeElement,6);!C.current&&!ae&&(ep[t]=!0,yo.sendNotification("PREVIEW_ERROR",{title:"Webpage load failed",url:t}))},P=()=>{h(!1),p?.(),y()},B=()=>{h(!1),d?.("Webpage load failed."),yo.sendNotification("PREVIEW_ERROR",{title:"Webpage load failed",url:t})};(0,le.useEffect)(()=>{u?.(_),m(!1),En.disableCSPFromUrl(t).then().catch().finally(()=>{m(!0)})},[t]);let E=(0,le.useMemo)(()=>({controller:_,url:t,title:r,html:x,readabilityMarkdown:n,loading:f}),[_,t,r,x,n,f]),{isFreeze:T,resetFreeze:U,disableFreeze:D,enableFreeze:N}=ct();return le.default.createElement(pi.Provider,{value:E},le.default.createElement(b,{width:"100%",height:"100%",onMouseMove:U},!s&&le.default.createElement(Ql,{hideTools:!l,...i}),le.default.createElement(et,{loading:!c},le.default.createElement(Kl,{onLoadSuccess:P,onLoadError:B}),!l&&le.default.createElement(Jl,{freeze:T,disableFreeze:D,enableFreeze:N,...a}))))},en=Qd;var ge=g(v());var tn=g(v()),mi=(0,tn.createContext)({controller:la,videoId:"",loading:!0}),vt=()=>(0,tn.useContext)(mi);var Gt=g(v());var Jd=e=>{let{startTime:o,autoplay:t,aspectRatio:r="16:9",onLoadSuccess:n,onLoadError:i,onVideoClick:a}=e,{controller:s,videoId:l,title:u}=vt(),p=fe();se(s,"onChangeStartTime",p),(0,Gt.useEffect)(()=>(s.init(),()=>{s.destroy()}),[s]);let d=o??s.startTime,f=(0,Gt.useMemo)(()=>{let c=new URL(`https://www.youtube.com/embed/${l}`);return d&&c.searchParams.append("start",`${Math.round(d)}`),c.searchParams.append("autoplay",`${Number(t)}`),c.searchParams.append("enablejsapi","1"),c.toString()},[d]);return Gt.default.createElement("div",{style:{position:"relative",width:"100%",paddingTop:(()=>{switch(r){case"16:9":return"56.25%";case"4:3":return"75%";default:return"56.25%"}})()}},Gt.default.createElement("iframe",{ref:c=>s.setIframeElement(c),onClick:a,onLoad:n,onError:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:0,borderRadius:"8px"},src:f,title:u||"Youtube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))},tp=Jd;var on=g(v());var ec=e=>{let{hideTools:o,sx:t,...r}=e,{videoId:n,title:i,loading:a}=vt(),s=`https://www.youtube.com/watch?v=${n}`;return on.default.createElement(ye,{icon:on.default.createElement("img",{src:At("https://www.youtube.com"),width:16,height:16,alt:i}),title:i,loading:a,sx:t,...r},!o&&on.default.createElement(Ot,{openLink:s}))},op=ec;var an=g(v());var np=g(rp()),ip=g(ju()),nn=g(v());var nc=e=>{let{sx:o,...t}=e,{t:r}=A(),{controller:n,transcripts:i}=vt(),a=n.isTranscriptMode,s=fe();return se(n,"onChangeTranscriptMode",s),i?.length?nn.default.createElement(Se,{title:r(a?"package__features:document__youtube_viewer__toolbar__hide_transcript":"package__features:document__youtube_viewer__toolbar__show_transcript"),onClick:()=>{n.setIsTranscriptMode(!a)},sx:o,...t},a?nn.default.createElement(np.default,null):nn.default.createElement(ip.default,null)):null},ap=nc;var ic=e=>{let{sx:o,...t}=e,{videoId:r}=vt(),n=`https://www.youtube.com/watch?v=${r}`;return an.default.createElement(gt,{sx:o,...t},an.default.createElement(ap,null),an.default.createElement(Ot,{openLink:n}))},sp=ic;var Zt=g(v());var ac=e=>{let{transcripts:o}=e,{controller:t}=vt();return Zt.default.createElement(I,{width:"100%",height:"100%",position:"absolute",bgcolor:"background.default"},Zt.default.createElement(b,{ref:r=>t.setTranscriptsElement(r),sx:{width:"100%",height:"100%",overflow:"auto",p:3},gap:3},o.map(r=>Zt.default.createElement(b,{key:r.start,direction:"row",gap:1.5,"data-start":r.start,"data-duration":r.duration},Zt.default.createElement(I,{className:"maxai--youtube-viewer--transcript-time",sx:{padding:"4px 6px",height:22,borderRadius:1,fontSize:12,fontWeight:400,bgcolor:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, 0.16)":"rgba(0, 0, 0, 0.06)",color:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, 0.87)":"rgba(17, 17, 17, 1)"}},Zt.default.createElement("span",null,Ma(r.start))),Zt.default.createElement(S,{className:"maxai--youtube-viewer--transcript-content",fontSize:14,lineHeight:"20px",color:"text.primary"},r.text)))))},lp=ac;var sc=e=>{let{controller:o,videoId:t,title:r,transcripts:n,titleBarProps:i,playerProps:a,toolbarProps:s,hideTitleBar:l,hideToolbar:u,onLoadStart:p,onLoadSuccess:d,onLoadError:f}=e,[h,c]=(0,ge.useState)(!0),m=(0,ge.useMemo)(()=>o||new sa,[o]),x=()=>{c(!1),d?.()},w=()=>{c(!1),f?.("Youtube load failed.")},_=fe();se(m,"onChangeTranscriptMode",({isTranscriptMode:T})=>{T&&m.pauseVideo(),_()}),(0,ge.useEffect)(()=>{p?.(m)},[]),(0,ge.useEffect)(()=>(m.init(),()=>{m.destroy()}),[m]);let C=(0,ge.useMemo)(()=>({controller:m,videoId:t,title:r,transcripts:n,loading:h}),[m,t,r,n,h]),{isFreeze:y,resetFreeze:P,disableFreeze:B,enableFreeze:E}=ct();return ge.default.createElement(mi.Provider,{value:C},ge.default.createElement(b,{width:"100%",height:"100%",onMouseMove:P},!l&&ge.default.createElement(op,{hideTools:!u,...i}),ge.default.createElement(b,{flex:1,p:1,width:"100%",height:0,justifyContent:"center",alignItems:"center",position:"relative"},ge.default.createElement(tp,{...a,onLoadSuccess:x,onLoadError:w}),m.isTranscriptMode&&n?.length&&ge.default.createElement(lp,{transcripts:n})),!u&&ge.default.createElement(sp,{freeze:y,disableFreeze:B,enableFreeze:E,...s})))},pp=sc;var O=g(v()),lc=O.default.lazy(()=>import("./WYQDPVEV.js")),up=O.default.lazy(()=>import("./DQLPNWRO.js")),pc=e=>{let{documentId:o,title:t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,viewerProps:a}=e,{document:s,downloadDocument:l}=hr(o),u=(0,O.useMemo)(()=>s?.s3?.doc_url&&Nn(s.s3.doc_url),[s?.s3?.doc_url]),p=_t({document:s,isExpired:u}),[d,f]=(0,O.useState)(!0);if((0,O.useEffect)(()=>{let c=!1;return f(!0),l(o).then(async m=>{if(!c&&!(p.current.document&&!p.current.isExpired))if(m){if(m.s3?.doc_url&&Nn(m.s3.doc_url)){if(m=await l(o,!0),c)return;if(!m){i?.("Load document failed");return}}r?.(null,m)}else i?.("Load document failed")}).catch().finally(()=>{c||f(!1)}),()=>{c=!0}},[o]),!s){let{hideTitleBar:c,titleBarProps:m}=a||{};return O.default.createElement(O.default.Fragment,null,!c&&O.default.createElement(ye,{icon:null,title:t,loading:!0,...m}),d?O.default.createElement(et,{loading:!0}):O.default.createElement(b,{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},O.default.createElement(S,{color:"text.primary"},"Something error, please select other document")))}return O.default.createElement(b,{width:"100%",height:"100%",position:"relative"},(()=>{switch(s.doc_type){case"image":return O.default.createElement($l,{src:s.s3?.doc_url||"",title:t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a});case"audio":{let c=s.s3?.doc_url?[s.s3.doc_url]:[];return O.default.createElement(tl,{sources:c,title:t,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a})}case"page_content__webpage":case"page_content__email":return O.default.createElement(en,{url:s.link||"",title:s.doc_type_dependent_data?.title||t||"",readabilityMarkdown:s.doc_type_dependent_data?.readabilityMarkdown||"",onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a});case"page_content__youtube":return O.default.createElement(pp,{videoId:ta.retrieveVideoId(s.link||""),title:s.doc_type_dependent_data?.title||t||"",transcripts:s.doc_type_dependent_data?.transcripts||[],onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a});case"search_results":{let c=Da(s,"search_results");return c?O.default.createElement(ql,{searchResults:c,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a}):null}case"page_content__pdf":return O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(lc,{file:s.file||s.s3?.doc_url,fileId:s.doc_id,fileName:t,fileSize:s.file_size,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a}));case"chat_file":case"chat_file_code":return dr({name:t||"",type:s.file_mime_type||""})==="chat_file_excel"?O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(up,{file:s.file||s.s3?.doc_url||"",fileName:t,fileSize:s.file_size,fileType:s.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a})):O.default.createElement(ml,{file:s.file||s.s3?.doc_url||"",documentType:s.doc_type,fileName:t,fileSize:s.file_size,fileType:s.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a});case"chat_file_excel":return O.default.createElement(O.Suspense,{fallback:O.default.createElement(et,{loading:!0})},O.default.createElement(up,{file:s.file||s.s3?.doc_url||"",fileName:t,fileSize:s.file_size,fileType:s.file_mime_type,onLoadStart:r,onLoadSuccess:n,onLoadError:i,...a}))}})())},mp=pc;var No=g(v()),mc=e=>{let{tab:o}=e,t=(a,s)=>{let l={status:"loading",viewerController:a};s?.doc_type==="image"&&(l.favIconUrl=s.s3?.doc_url||""),K.update(o.id,l)},r=()=>{K.update(o.id,{status:"complete"})},n=()=>{K.update(o.id,{status:"unloaded",title:"Load failed"})},i=()=>{if(o.documentId)return No.default.createElement(mp,{documentId:o.documentId,title:o.title,onLoadStart:t,onLoadSuccess:r,onLoadError:n,viewerProps:o.viewerProps});if(o.url)return No.default.createElement(en,{url:o.url,title:o.title,onLoadStart:t,onLoadSuccess:r,onLoadError:n,...o.viewerProps})};return No.default.createElement(Ks.Provider,{value:{tabData:o,tabId:o.id}},No.default.createElement(b,{sx:{height:"100%",width:"100%",display:o.active?"flex":"none",borderRadius:1,overflow:"auto"},tabIndex:-1,component:"div","data-testid":`maxai--browser-panel--${o.id}`},i()))},dp=mc;var cp=g(to());var oe=g(v()),dc=e=>{let{tabInstance:o}=e,{theme:t}=(0,oe.useContext)(Ae),{id:r,title:n,favIconUrl:i,active:a,status:s}=o,l=s==="loading",{document:u}=hr(o.documentId),p=async()=>{await K.update(r,{active:!0})},d=async()=>{await K.remove(r)},f=(0,oe.useMemo)(()=>({maxWidth:"144px",flexDirection:"row",alignItems:"center",gap:"8px",borderRadius:a?"6px 6px 0 0":"6px",padding:"6px 8px",backgroundColor:a?t.tabBackground:t.tabBackgroundInactive,color:a?t.tabText:t.tabTextInactive,position:"relative",width:0,flex:1,"&:hover":{background:a?t.tabBackground:t.tabBackgroundHover}}),[a]);return oe.default.createElement(b,{onClick:p,className:"maxai--browser-window--header--tabs-bar--tab","data-testid":`maxai--browser-tab--${r}`,sx:f},oe.default.createElement(b,{sx:{width:"16px",height:"16px",position:"relative",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,"& > img":{width:l?"12px":"16px",height:l?"12px":"16px",boxSizing:"border-box",borderRadius:l?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"},"& > svg":{fontSize:l?"12px":"16px",boxSizing:"border-box",borderRadius:l?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"}}},oe.default.createElement(rr,{thickness:4,size:16,sx:{position:"absolute",color:"primary.main",display:l?"block":"none"}}),i?oe.default.createElement("img",{src:i,width:16,height:16,alt:n}):u?.doc_type?oe.default.createElement(ro,{documentType:u.doc_type}):null),oe.default.createElement(S,{fontSize:"14px",noWrap:!0,textAlign:"left",width:0,flex:1},n),oe.default.createElement(ie,{"aria-label":"close",sx:{flexShrink:0,width:"16px",height:"16px",padding:0},onClick:d},oe.default.createElement(cp.default,{sx:{fontSize:"12px"}})),a&&oe.default.createElement(cc,null))},cc=()=>{let{theme:e}=(0,oe.useContext)(Ae);return oe.default.createElement(I,{sx:{position:"absolute",width:"100%",bottom:"-6px",height:"6px",left:0,backgroundColor:e.tabBackground}},oe.default.createElement(I,{sx:{width:"8px",height:"8px",position:"absolute",left:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},oe.default.createElement(I,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",left:"-8px"}})),oe.default.createElement(I,{sx:{width:"8px",height:"8px",position:"absolute",right:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},oe.default.createElement(I,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",right:"-8px"}})))},fp=dc;var Ho=g(v()),fc=e=>{let{tabs:o}=e,{theme:t}=(0,Ho.useContext)(Ae);return Ho.default.createElement(b,{className:"maxai--browser-window--header--tabs-bar",sx:{flexDirection:"row",alignItems:"center",gap:"6px",padding:"6px",background:t.tabBackgroundInactive}},o.map(r=>Ho.default.createElement(fp,{tabInstance:r,key:r.id})))},hp=fc;var Ee=g(v()),hc=e=>{let{windowInstance:o}=e,{theme:t}=(0,Ee.useContext)(Ae),{id:r,type:n,width:i,height:a,alwaysOnTop:s,focused:l,top:u,left:p}=o,[d,f]=(0,Ee.useState)(o.tabs);(0,Ee.useEffect)(()=>{let c=()=>{f(o.tabs)};return K.addListener("onCreated",c),K.addListener("onRemoved",c),K.addListener("onUpdated",c),c(),()=>{K.removeListener("onCreated",c),K.removeListener("onRemoved",c),K.removeListener("onUpdated",c)}},[r]);let h=(0,Ee.useMemo)(()=>{let c={width:"100%",height:"100%",position:"absolute",boxSizing:"border-box",zIndex:0,top:0,left:0,borderRadius:1,backgroundColor:t.frame,boxShadow:" 0px 2px 8px 0px rgba(0, 0, 0, 0.12)",overflow:"hidden",border:"1px solid",borderColor:"border.main"};return s?c.zIndex=9999:l&&(c.zIndex=100),n==="popup"&&(c.zIndex=1e3,c.width=i,c.height=a),c},[i,a,n,l,s,u,p,t.frame]);return Ee.default.createElement(b,{sx:h,"data-testid":r,className:"maxai--browser-window",component:"div",tabIndex:-1,onKeyDownCapture:c=>{(c.metaKey||c.ctrlKey)&&c.key==="w"&&K.query({active:!0,currentWindow:!0}).then(m=>{m.forEach(x=>{K.remove(x.id)})})}},Ee.default.createElement(b,{className:"maxai--browser-window--header"},!o.hiddenTabBar&&Ee.default.createElement(hp,{tabs:d})),d.map(c=>Ee.default.createElement(dp,{tab:c,key:c.id})))},gp=hc;var Yo=g(v()),gc=e=>{let{sx:o}=e,{maxAIBrowserWindows:t}=(0,Yo.useContext)(Ae);return t.length===0?null:Yo.default.createElement(b,{sx:{flex:1,boxSizing:"border-box",width:"100%",height:"100%",position:"relative",...o}},t.map(r=>Yo.default.createElement(gp,{windowInstance:r,key:r.id})))},sn=gc;var bc=e=>{let{autoClearWindows:o=!0,sx:t,children:r}=e,n=_e(),i=Z(p=>p.conversationIds),[a,s]=(0,wt.useState)([]),l=(0,wt.useMemo)(()=>Ar(n.isDarkMode),[n.isDarkMode]),u={maxAIBrowserWindows:a,theme:l};return(0,wt.useEffect)(()=>{let p=()=>{s(dt.windows)};return dt.addListener("onCreated",p),dt.addListener("onUpdated",p),dt.addListener("onDestroyed",p),()=>{dt.removeListener("onCreated",p),dt.removeListener("onUpdated",p),dt.removeListener("onDestroyed",p)}},[]),(0,wt.useEffect)(()=>{if(!o)return;(async()=>{let d=await dt.getCurrent();if(d){let f=await K.query({windowId:d.id});await Promise.all(f.map(h=>K.remove(h.id))),await dt.remove(d.id)}})()},[o,i]),wt.default.createElement(Ae.Provider,{value:u},r||wt.default.createElement(sn,{sx:t}))},bp=bc;var xp=g(v()),xc=()=>{let e=t=>{ze(t==="showed"?"plan_subscription_failed_reminder_showed":"plan_subscription_failed_reminder_clicked",{reminder_type:"topbar"})},o=(0,xp.useRef)(e);return o.current=e,{trackSubscriptionFailedReminder:e,trackSubscriptionFailedReminderRef:o}},vp=xc;var wp=g(Ku());var Vt=g(v()),vc=e=>{let{title:o,content:t,href:r,target:n="_blank",onClick:i,onClose:a,sx:s}=e,l=Qo();return Vt.default.createElement(b,{direction:"row",spacing:1,p:1.5,sx:{position:"relative",bgcolor:"rgba(255, 239, 188, 1)",color:"rgba(132, 49, 0, 1)",pr:l?{xs:"60px",md:1.5}:"60px",justifyContent:l?{md:"center"}:null,...s}},Vt.default.createElement(wp.default,{sx:{colo:"inherit",fontSize:20,mt:"2px"}}),Vt.default.createElement(b,{spacing:1},Vt.default.createElement(S,{sx:{fontSize:14}},o),Vt.default.createElement(ne,{href:r,target:n,sx:{color:"inherit",fontSize:16,fontWeight:500},onClick:i},t)),Vt.default.createElement(ie,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:a},Vt.default.createElement(te,{icon:"Close",sx:{color:"rgba(0, 0, 0, 0.6)",fontSize:"24px"}})))},Cp=vc;var ho=g(v());var wc=()=>{let{t:e}=A(),{isSubscriptionPaymentFailed:o}=ee(),[t,r]=Qt(mr),{trackSubscriptionFailedReminder:n,trackSubscriptionFailedReminderRef:i}=vp(),{show:a,barHeight:s}=t;return(0,ho.useEffect)(()=>{r(l=>({...l,show:o}))},[o]),(0,ho.useEffect)(()=>{a&&i.current("showed")},[a]),a?ho.default.createElement(I,{id:"maxai-unable-subscription-bar",ref:l=>{l&&s!==l.offsetHeight&&r(u=>({...u,barHeight:l.offsetHeight}))}},ho.default.createElement(Cp,{title:e("package__features:pricing__unable_subscription__title"),content:e("package__features:pricing__unable_subscription__link__title"),href:`${J}/account/your-plan/`,onClick:()=>n("clicked"),onClose:()=>r(l=>({...l,show:!1}))})):null},_p=wc;var it=g(v());var Xe=g(v());var Sp=g(v());var Cc=()=>{let e=Z(t=>t.conversationType),o=ce(Je);return(0,Sp.useEffect)(()=>{if(o.open&&o.loadedAppSidebar&&!us()){let t=Wa(e);if(t.ref){ds(t.ref);let r=setTimeout(()=>{t.focus()},200);return()=>clearTimeout(r)}}},[o.open,o.loadedAppSidebar,e]),null},yp=Cc;var go=g(v());var _c=async()=>{try{let o=await new Ln({runtime:"client"}).postMessage({event:"Client_ping"});if(o.data?.tabId){let t=await Ko.getItem("SidebarAutoNewChatCached");if(t[o.data.tabId])return t[o.data.tabId]?.conversationIds||[]}return[]}catch{return[]}},Sc=async e=>{try{let r=(await new Ln({runtime:"client"}).postMessage({event:"Client_ping"})).data?.tabId;if(!r)return;let n=await Ko.getItem("SidebarAutoNewChatCached")||{};n[r]={conversationIds:e,createTime:Date.now()};let i=Object.keys(n),a=3*24*60*60*1e3;i.forEach(s=>{n[s].createTime<Date.now()-a&&delete n[s]}),await Ko.setItem("SidebarAutoNewChatCached",n)}catch{}},yc=()=>{let{setConversationIds:e,conversationIds:o}=Z(a=>({setConversationIds:a.setConversationIds,conversationIds:a.conversationIds})),{createConversation:t,getConversation:r}=Po(),n=o[0],i=fr(n);return oo(()=>{(async()=>{let s=await _c();if(s.length>0){if((await r(s[0]))?.isDelete||!await Ji.getUserInfo()){let f=await t("Chat",{reason:"initCreate"});e([f[0].id]);return}e(s);return}let p=(await t("Chat",{reason:"initCreate"})).map(d=>d.id)[0];e([p])})()}),(0,go.useEffect)(()=>{i?.isDelete&&t("Chat",{reason:"initCreate"}).then(a=>{e([a[0].id])})},[i?.isDelete]),(0,go.useEffect)(()=>{o.length>0&&Sc(o)},[o]),go.default.createElement(go.default.Fragment,null)},Ip=yc;var Ue=g(v());var Uo=g(v()),Tc=()=>{let[e,o]=(0,Uo.useState)(()=>window.location.href),[t,r]=(0,Uo.useState)(document.title),n=(0,Uo.useRef)(null),i=()=>{a(),n.current=setInterval(()=>{r(document.title),o(window.location.href)},1e3)},a=()=>{n.current&&clearInterval(n.current)};return{pageUrl:e,documentTitle:t,startListen:i,stopListen:a}},Pp=Tc;var Ic=()=>{let e=ce(Je),o=e.open||e.loadedAppSidebar,[t,r]=(0,Ue.useState)(o),{setChatDocuments:n,saveChatDocumentsToRemote:i}=gr(),{conversationIds:a,setConversationType:s}=Z(h=>({conversationIds:h.conversationIds,setConversationType:h.setConversationType})),{pageUrl:l,startListen:u,stopListen:p}=Pp(),[d,f]=(0,Ue.useState)(null);return(0,Ue.useEffect)(()=>{o&&r(!0)},[o]),(0,Ue.useEffect)(()=>{if(!t)return;let h=window.location.href;cr.analyzeToDocument(h).then(c=>{c.data?.doc_id&&cr.uploadDocument(c.data).then().catch()})},[t]),(0,Ue.useEffect)(()=>{a[0]&&Sa.getService().getConversationById(a[0]).then(h=>{h?.id&&f(h)})},[a]),(0,Ue.useEffect)(()=>{let h=null;if(d){s(d.type);let c=cr.analyzeToDocumentType(l)||"page_content__webpage",m=!1,x=(d?.meta.chatDocuments||[]).length===0,w=(d?.meta.chatDocuments||[]).filter(B=>B.preUploadMetadata?.browserExtensionSidebarCurrentPageURL?B.preUploadMetadata?.browserExtensionSidebarCurrentPageURL===l?(m=!0,!0):(B.selected&&(x=B.selected),!1):!0);if(m){n(()=>w);return}let _=Xt(),y=An().title,P={id:_,status:"idle",title:y,selected:x,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),maxAIDocumentId:Gi,maxAIDocumentType:c,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:l,previewIcon:At(l)},link:l};w.push(P),n(()=>w),h=setInterval(()=>{let B=An();B.title!==y&&(y=B.title,n(E=>E.map(T=>T.id===_?{...T,title:y}:T)))},1e3)}return()=>{h&&clearInterval(h)}},[d?.id,l]),(0,Ue.useEffect)(()=>(u(),()=>{p()}),[]),Ue.default.createElement(Ue.default.Fragment,null)},Ap=Ic;var Pc=()=>{let e=ce(Je),o=e.open||e.loadedAppSidebar,{conversationIds:t}=Z(l=>({conversationIds:l.conversationIds})),{getConversation:r,updateConversation:n}=Po(),{refreshModelUsageOnce:i}=Hn(),a=_t(t[0]),{refetch:s}=is();return(0,Xe.useEffect)(()=>{o&&(Na("Chat").then(async l=>{let u=l[0];if(!u||!a.current)return;let p=await r(a.current);p&&p.meta.AIModel!==u.value&&n(p.id,{meta:{AIProvider:u.AIProvider,AIModel:u.value,maxTokens:u.maxTokens}},{syncToRemote:!!p.meta.isUploaded})}),i(),Xa.checkUpdate().then(l=>{l&&s("OpenSidebar")}))},[o]),Xe.default.createElement(Xe.default.Fragment,null,Xe.default.createElement(Ip,null),Xe.default.createElement(Ap,null),Xe.default.createElement(Bs,null),Xe.default.createElement(yp,null),Xe.default.createElement(Ac,null))},Ac=()=>{let e=Z(m=>m.setConversationIds),t=Z(m=>m.conversationIds)[0],{askAIQuestionV2:r,askAIWithShortcutsV2:n}=br(t),i=Et(t),a=_t(i),s=_t(n),l=_t(r),{toggleMaxAISearchFeature:u,setChatDocuments:p,handleUploadFilesToChatDocuments:d}=gr(),{updateConversation:f}=Po(),h=Jt(Je),{refreshModelUsage:c}=Hn();return Ea(async(m,x)=>{if(m==="SyncContextMenuConversationInSidebar"){let{conversationId:w}=x;w&&e([w])}if(m==="ContextMenuQuickSearchSelectedText"){let{question:w}=x;w&&(ht(),await So(300),u(!0),p(_=>_.map(C=>({...C,selected:C.maxAIDocumentType==="search_results"}))),await So(300),await l.current({text:w,type:"user",meta:{includeHistory:!0}}))}if(m==="ContextMenuChatWithImage"){await So(300);let w=[],_=async C=>{let y=await Ms(C,{parse:"blob",method:"GET",cache:"no-store",mode:"cors"});if(!y?.data)return;let P=C.split("/").pop?.()?.split("?")?.[0]||"Image.png";if(P.endsWith(".svg")){let B=await $i(Xi(y.data,P));B&&w.push(B)}else w.push(Es(y.data,P))};try{let C=x?.imageSrc?.split(";")?.[0]?.split("/")?.[1]||"png",y=`${x?.image?.alt||"Image"}.${C}`;if(x.imageSrc.startsWith("data:image")){let P=await Ui(x.imageSrc,y);P&&w.push(P)}else await _(x.imageSrc)}catch{await _(x.image.src||x.imageSrc)}w.length>0&&(p(C=>C.map(y=>({...y,selected:!1}))),await d(w,{uploadToConversationId:t}))}if(m==="MaxAIContinueSearchWithAI"){let{conversationId:w,AIMessage:_}=x;if(!w)return;let C=await f(w,{type:"Chat"},{syncToRemote:!0,updateUpdatedAt:!0});C&&((await zn.getService().dangerouslyGetTotalMessageIds(C.id)).includes(_.messageId)||await zn.getService().addMessages(C.id,[_],{waitUntilRemoteDBUpdated:!0}),e([C.id]),ht())}if(m==="QuickAccessSummary"){if(a.current||!await ma({emitEvent:!0}))return;ht();let w=!1,_=[];if(p(B=>(_=B.map(E=>E.link===window.location.href?(w=!0,{...E,selected:!0}):E),kt(_))),!w)return;await So(300);let{pageSummaryType:C}=x,y=Zi[C]||[];if(!y)return;let P=y(_);P?.[0]?.actions?.length&&s.current(P[0].actions)}m==="QuickAccessScreenshot"&&h(w=>({...w,open:!0})),m==="RefreshUsage"&&c()}),Xe.default.createElement(Xe.default.Fragment,null)},kp=Pc;var V=g(v());var Bp=g(v());var kc=e=>{let{sx:o}=e,{conversationType:t}=Ua(),r=Z(i=>i.setConversationType),n=t==="Chat";return Bp.default.createElement(xs,{sx:{visibility:n?"visible":"hidden",position:n?"relative":"absolute",...o},getScreenshot:Ns,onCropEnd:()=>{r("Chat"),ht()},onCropStart:()=>{!Qo()&&Tr()&&yr()}})},Ep=kc;var di=g(v());var Bc=({sx:e})=>{let{t:o}=A(),{chatBoxShortCutKey:t}=Sr();return t?null:di.default.createElement(S,{fontSize:12,sx:e},di.default.createElement(ne,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",onClick:()=>{eo.openPage({key:"shortcuts"})}},o("package__features:chat__navbar__conversation_share__set_shortcut_button__tooltip")))},Mp=Bc;var Lp=g(v()),Dp=()=>{let{isLogin:e}=er(),{t:o}=A(),{openAuthSignInCardModal:t}=Ca();return e?null:Lp.default.createElement(G,{"data-testid":"maxai--auth--un-login-sign-in-button",variant:"contained",sx:{fontSize:"14px",fontWeight:500,minWidth:"unset",p:"6px"},onClick:()=>{t()}},o("client:sidebar__home_view__sign_in_button__title"))};var ci=g(v());var Ec=()=>{let{conversationId:e}=za(),{showWithClickAlwaysPintoSidebar:o}=Ts(),{t}=A(["package__features"]);return ci.default.createElement(es,{"data-testid":"maxai--context-window--always-responses-in-contextmenu--button",title:t("package__features:chat__ai_message__tools__unpin_button"),sx:{p:"6px",borderRadius:"8px",color:"text.secondary","&:hover":{color:"text.primary",bgcolor:r=>r.palette.mode==="dark"?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, 0.04)"}},onClick:async()=>{await o(e)},TouchRippleProps:{center:!1}},ci.default.createElement(te,{icon:"AlwaysResponsesInContextMenu",sx:{fontSize:"20px"}}))},Op=Ec;var Up=g(Bn()),Xp=g(Qi()),Me=g(v());var Vp=g(Bn()),Fp=g(Qi()),Xo=g(v());Vp.default.extend(Fp.default);var uy=Object.freeze({CHRISTMAS_2024:{endTime:"2025-1-1 00:00:00"}}),Mc=e=>{if(!e)return!1;let{group_id:o,subscription_plan_name:t}=e;return o?!1:t?["BASIC_MONTHLY","BASIC_YEARLY","PRO_MONTHLY","PRO_YEARLY","ELITE_MONTHLY"].includes(t):!0};var Lc=()=>{let{userInfo:e,loaded:o}=ee();return{isActivityUser:(0,Xo.useMemo)(()=>Mc(e),[e]),loaded:o,isActivityOpen:!1}},ln=Lc;var Wp=g(to()),zp=g(Zu());var fi=g(In());var F=g(v());var Dc=e=>{let{upgradeCardTemplate:o,onClose:t}=e,{t:r}=A(),{isPayingUser:n}=ee(),{pricingPlansInfo:i}=Fn(),{showPricingUpgradeContentPopup:a}=Ba(),s=l=>{n?o.learnMoreLink&&(Wn("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:l?.currentTarget}),window.open(o.learnMoreLink,"_blank")):(Wn("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:l?.currentTarget}),a()),t?.()};return F.default.createElement(b,{sx:{maxHeight:"calc(100vh - 100px)",p:2,gap:2,textAlign:"left"}},F.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",flexShrink:0},F.default.createElement(S,{fontSize:16,color:"text.primary",flex:1,fontWeight:500},r("client:sidebar__promotion_dialog__title",{VERSION:Ki})),F.default.createElement(ie,{onClick:t},F.default.createElement(Wp.default,{sx:{fontSize:24,color:"text.primary"}}))),F.default.createElement(b,{flex:1,sx:{overflowY:"auto"}},F.default.createElement(Io,{src:o.image,width:832,height:468,onClick:s,sx:{cursor:"pointer"}}),F.default.createElement(b,{py:2,spacing:2},F.default.createElement(S,{fontSize:18,color:"text.primary",flex:1,fontWeight:800},o.title(r)),F.default.createElement(b,{spacing:1,sx:o.templateSx},o.descriptions(r).map((l,u)=>{let p=l.needListStyle;return F.default.createElement(b,{key:u,direction:"row",sx:{position:"relative",...p?{pl:1.5}:{}}},p&&F.default.createElement(I,{width:4,height:4,flexShrink:0,borderRadius:"50%",bgcolor:"text.primary",sx:{position:"absolute",top:8,left:0}}),F.default.createElement(S,{fontSize:16,lineHeight:1.5,sx:{color:"text.secondary","& > b":{color:"text.primary"}}},l.title&&F.default.createElement("b",null,l.title,": "),l.description))})),!n&&o.learnMoreLink&&F.default.createElement(ne,{href:o.learnMoreLink,target:"_blank",rel:"noreferrer",fontSize:14,sx:{textAlign:"left",color:l=>l.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",textDecoration:"underline",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"}},r("client:sidebar__promotion_dialog__learn_more"),F.default.createElement(fi.default,{sx:{fontSize:"16px",color:"inherit"}},F.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.default.createElement("path",{d:"M4.03076 11.9679L11.9687 4.02991M11.9687 4.02991H5.51913M11.9687 4.02991V10.2039",stroke:"currentColor",strokeWidth:"1.24031",strokeLinecap:"round",strokeLinejoin:"round"})))))),F.default.createElement(I,{position:"relative"},!n&&F.default.createElement(F.default.Fragment,null,F.default.createElement(G,{variant:"contained",fullWidth:!0,startIcon:F.default.createElement(zp.default,{sx:{color:"#FFCB45"}}),sx:{fontSize:16,px:2,py:1.5,borderRadius:1},onClick:s},r("client:sidebar__promotion_dialog__cta_button")),F.default.createElement(I,{sx:{position:"absolute",right:10,top:0,transform:"translateY(-50%)",bgcolor:"rgba(255, 126, 53, 1)",color:"#fff",borderRadius:1,px:1,py:.5}},F.default.createElement(S,{fontSize:16,fontWeight:500,lineHeight:1},r("client:sidebar__promotion_dialog__discount__title",{DISCOUNT:i.elite_yearly.discount_title})))),n&&o.learnMoreLink&&F.default.createElement(G,{variant:"contained",fullWidth:!0,sx:{fontSize:16,px:2,py:1.5,borderRadius:1},onClick:s},r("client:sidebar__promotion_dialog__learn_more"),F.default.createElement(fi.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}},F.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.default.createElement("path",{d:"M4.03076 11.9679L11.9687 4.02991M11.9687 4.02991H5.51913M11.9687 4.02991V10.2039",stroke:"currentColor",strokeWidth:"1.24031",strokeLinecap:"round",strokeLinejoin:"round"}))))))},hi=Dc;var $o=()=>no[0],Np=e=>Cr[$o()](e),pn=async()=>{let e=$o(),o=await ot();return Object.prototype.hasOwnProperty.call(o,e)?o[e]:(await tt(e,!1),!1)},Hp=async()=>{let e=$o();await tt(e,!0)};var un=g(v());var Oc=()=>{let{userInfo:e,loaded:o}=ee(),[t,r]=(0,un.useState)(()=>no[0]),n=(0,un.useMemo)(()=>!o||!e?null:Cr[t](e),[t,o,e]);return{extensionUpgradeCardType:t,extensionUpgradeCardTemplate:n,setExtensionUpgradeCardType:r}},Yp=Oc;Up.default.extend(Xp.default);var Vc=()=>{let{extensionUpgradeCardTemplate:e,extensionUpgradeCardType:o,setExtensionUpgradeCardType:t}=Yp(),r=da(),{userInfo:n,isPayingUser:i}=ee(),{isActivityUser:a,loaded:s,isActivityOpen:l}=ln(),[u,p]=(0,Me.useState)(!1),{paywallShowDebounce:d}=Aa(),f=(0,Me.useRef)(!1),h=()=>{p(!1)};return(0,Me.useEffect)(()=>{let c=n?.created_at;n===null||!c||!s||pn().then(async m=>{if(m||!e)return;let x=!1;if(e.cardType==="activity")x=a;else if(e.cardType==="feature"){let w=new Date(c).getTime()+2592e5;new Date().getTime()>w&&(x=!0)}else x=!0;x&&setTimeout(async()=>{await Hp(),f.current||(p(!0),f.current=!0),d({paywallType:"browser_extension_update",paywallReason:"proactive"})},1500)})},[r.name,n,i,l,s,e,a,d]),e?Me.default.createElement(lr,{open:u,disableScrollLock:!0,disableEnforceFocus:!0,onClose:(c,m)=>{m!=="backdropClick"&&h()},slotProps:{backdrop:{onClick:()=>null}},"data-testid":"maxai-sidebar--promotion-dialog",sx:{position:"absolute",zIndex:2147483647,[`.${Go.root}`]:{position:"absolute"},[`.${sr.paper}`]:{maxHeight:"max-content",maxWidth:448,width:"calc(100% - 32px)",mx:2,borderRadius:2,overflow:"hidden",boxShadow:"0px 4px 8px 0px rgba(128, 128, 128, 0.16)",...e.cardType==="activity"&&{maxWidth:460,background:"transparent",boxShadow:"none"}}}},Me.default.createElement(wr,null,Me.default.createElement("select",{defaultValue:o,onChange:c=>{t(c.target.value)}},no.map(c=>Me.default.createElement("option",{key:c,value:c},c)))),e.cardType==="activity"&&Me.default.createElement(hi,{upgradeCardTemplate:e,onClose:h}),e.cardType==="feature"&&Me.default.createElement(hi,{upgradeCardTemplate:e,onClose:h})):null},$p=Vc;var Ft=g(v());var jp=g(to()),Gp=g(Rp());var pe=g(v());var gi=`${J}/survey/feedback`,Nc=({surveyKey:e,handleCloseClick:o,sx:t,closeBtn:r=!0})=>{let{t:n}=A(["client"]),i=()=>{window.open(gi),ze("survey_card_clicked",{survey_type:e})};return oo(()=>{ze("survey_card_showed",{survey_type:e})}),pe.default.createElement(b,{sx:{textAlign:"left",color:"text.primary",bgcolor:a=>a.palette.mode==="dark"?"#3B3D3E":"#fff",...t}},pe.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",flexShrink:0,py:2.5,px:2},pe.default.createElement(S,{fontSize:20,color:"text.primary",flex:1,fontWeight:700},n("client:sidebar__survey_dialog__title")),r&&pe.default.createElement(ie,{onClick:o},pe.default.createElement(jp.default,{sx:{fontSize:24,color:"text.primary"}}))),pe.default.createElement(b,{px:2,sx:{overflowY:"auto"}},pe.default.createElement(Io,{src:ft("/images/survey/dialog-banner.png"),width:832,height:468,onClick:i,sx:{cursor:"pointer"}}),pe.default.createElement(b,{py:2,spacing:2},pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item1__part1")," ",pe.default.createElement(Mn,{href:gi,underline:"always",onClick:()=>{ze("survey_card_clicked",{survey_type:e})},sx:{color:a=>a.palette.mode==="dark"?"text.primary":"primary.main",textDecorationColor:a=>a.palette.mode==="dark"?"#fff":a.palette.primary.main}},n("client:sidebar__survey_dialog__description__item1__part2")),"?"),pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__description__item2")),pe.default.createElement(S,{fontSize:16,lineHeight:1.5},n("client:sidebar__survey_dialog__thanks"),",",pe.default.createElement("br",null),n("client:sidebar__survey_dialog__by_who")))),pe.default.createElement(b,{flexShrink:0,spacing:1,p:2},pe.default.createElement(G,{variant:"contained",fullWidth:!0,href:gi,target:"_blank",startIcon:pe.default.createElement(Gp.default,{sx:{color:"#F36666"}}),sx:{borderRadius:1,fontSize:16,px:2,py:1.5},onClick:()=>{ze("survey_card_clicked",{survey_type:e})}},n("client:sidebar__survey_dialog__cta_button_text"))))},Zp=Nc;var bi=g(Bn()),qt=g(v());var Hc=()=>{let e="feedback",[o,t]=(0,qt.useState)(!1),{userInfo:r,isPayingUser:n}=ee(),i=ce(Ls),a=ce(Ds),[s,l]=(0,qt.useState)(!1),u=async()=>{(await ot()).ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT?l(!0):l(!1)},p=(0,qt.useMemo)(()=>{if(!o||!a||i[e]||r===null)return!1;let d=r?.created_at,f=r?.subscribed_at;return n?f?(0,bi.default)(Date.now()).diff(f*1e3,"day")>14:d?(0,bi.default)(Date.now()).diff(d,"day")>21:!1:!1},[r,n,i,o,a,e]);return(0,qt.useEffect)(()=>{r&&u().then(()=>{t(!0)})},[r]),{loaded:o,canShowSurvey:p,alreadyPoppedSurveyModal:s}},qp=Hc;var Yc=()=>{let{canShowSurvey:e,alreadyPoppedSurveyModal:o,loaded:t}=qp(),[r,n]=(0,Ft.useState)(!1),i=()=>{n(!1)};return(0,Ft.useEffect)(()=>{let a=()=>{t&&e&&!o&&setTimeout(async()=>{await tt("ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT",!0),n(!0)},1500)};pn().then(s=>{s&&a()})},[e,o,t]),Ft.default.createElement(lr,{open:r,disableScrollLock:!0,disableEnforceFocus:!0,"data-testid":"maxai-sidebar--survey-dialog",onClose:(a,s)=>{s!=="backdropClick"&&i()},slotProps:{backdrop:{onClick:()=>null}},sx:{position:"absolute",zIndex:2147483647,[`.${Go.root}`]:{position:"absolute"},[`.${sr.paper}`]:{maxWidth:448,width:"calc(100% - 32px)",mx:2}}},Ft.default.createElement(I,{sx:{maxHeight:"calc(100vh - 100px)"}},Ft.default.createElement(Zp,{surveyKey:"feedback",handleCloseClick:i})))},Kp=Yc;var De=g(v());var $e=g(v());function Qp(e,o){let t=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;o&&(t=o.clientWidth,r=o.clientHeight);let{top:n,right:i,bottom:a,left:s}=e.getBoundingClientRect();return n>=0&&s>=0&&i<=t&&a<=r}var dn=(e,o,t)=>{if(!e)return t?.[0]||"top";let r=e.getBoundingClientRect(),n={top:r?.top||0,right:document.documentElement.clientWidth-(r?.right||0),bottom:document.documentElement.clientHeight-(r?.bottom||0),left:r?.left||0},i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};return!t||!t.length?Object.entries(n).reduce((l,[u,p])=>p>l.value?{direction:u,value:p}:l,{direction:"top",value:0}).direction:t.find(s=>{switch(s){case"top":return n.top>o.height+26&&i.width>o.width;case"top-start":return n.top>o.height+26&&i.width-n.left>o.width;case"top-end":return n.top>o.height+26&&i.width-n.right>o.width;case"bottom":return n.bottom>o.height+26&&i.width>o.width;case"bottom-start":return n.bottom>o.height+26&&i.width-n.left>o.width;case"bottom-end":return n.bottom>o.height+26&&i.width-n.right>o.width;case"left":return n.left>o.width+26&&i.height>o.height;case"left-start":return n.left>o.width+26&&i.height-n.top>o.height;case"left-end":return n.left>o.width+26&&i.height-n.bottom>o.height;case"right":return n.right>o.width+26&&i.height>o.height;case"right-start":return n.right>o.width+26&&i.height-n.top>o.height;case"right-end":return n.right>o.width+26&&i.height-n.bottom>o.height;default:return!1}})||t[t.length-1]};function Uc(e){let o=$e.default.useRef();return o.current=e,$e.default.useCallback((...r)=>o.current?.(...r),[])}function xi(e,o,t,r,n){let[i,a]=(0,$e.useState)(null);(0,$e.useEffect)(()=>{requestAnimationFrame(()=>{let f=typeof e=="function"?e(t):e;a(f||null)})},[t,e]);let[s,l]=(0,$e.useState)(null),u=Uc(()=>{if(i){!Qp(i,t)&&o&&i?.scrollIntoView?.(n);let f=i.getBoundingClientRect(),{left:h,top:c}=f,{width:m,height:x}=f,{left:w,top:_}=t?t.getBoundingClientRect():{left:0,top:0};h=h-w,c=c-_;let C={left:h,top:c,width:m,height:x,radius:0};l(y=>JSON.stringify(y)!==JSON.stringify(C)?C:y)}else l(null)}),p=f=>(Array.isArray(r?.offset)?r?.offset[f]:r?.offset)??6;return(0,$e.useLayoutEffect)(()=>{let f=tr(u,200),h=()=>{u(),f()};return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[i,o,u,t]),[(0,$e.useMemo)(()=>{if(!s)return s;let f=p(0),h=p(1),c=r?.radius||8;return{left:s.left-f,top:s.top-h,width:s.width+f*2,height:s.height+h*2,radius:c}},[s,r]),i]}var Te=g(v()),cn={fill:"transparent",pointerEvents:"auto"},Xc=e=>{let{pos:o,showMask:t,fill:r="rgba(0,0,0,0.5)",open:n,zIndex:i,disabledInteraction:a,animation:s,animationDuration:l=300,maskMode:u="fixed"}=e,d=`MaxAITourMask-${Xt()}`,h=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"};return n?Te.default.createElement("div",{style:{position:u,left:0,right:0,top:0,bottom:0,zIndex:i,pointerEvents:o&&!a?"none":"auto"}},t?Te.default.createElement("svg",{style:{width:"100%",height:"100%"}},Te.default.createElement("defs",null,Te.default.createElement("mask",{id:d},Te.default.createElement("rect",{x:"0",y:"0",...h,fill:"white"}),o&&Te.default.createElement("rect",{x:o.left,y:o.top,rx:o.radius,width:o.width,height:o.height,fill:"black",style:{transition:s?`all ${l}ms`:"none"}}))),Te.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:r,mask:`url(#${d})`}),o&&Te.default.createElement(Te.default.Fragment,null,Te.default.createElement("rect",{...cn,x:"0",y:"0",width:"100%",height:o.top}),Te.default.createElement("rect",{...cn,x:"0",y:"0",width:o.left,height:"100%"}),Te.default.createElement("rect",{...cn,x:"0",y:o.top+o.height,width:"100%",height:`calc(100vh - ${o.top+o.height}px)`}),Te.default.createElement("rect",{...cn,x:o.left+o.width,y:"0",width:`calc(100vw - ${o.left+o.width}px)`,height:"100%"}))):null):null},Jp=Xc;var W=g(v()),Le=g(v());var eu=g(v());var fn="maxai-tour--triangle-arrow";var $c=({placement:e,arrowColor:o="#000",arrowSize:t=6,borderRadius:r=6})=>{let n={};switch(e){case"top":n={bottom:-t,left:`calc(50% - ${t}px)`,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"left":n={top:`calc(50% - ${t}px)`,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"bottom":n={top:-t,left:`calc(50% - ${t}px)`,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"right":n={top:`calc(50% - ${t}px)`,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;case"bottom-start":n={top:-t,left:r,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"bottom-end":n={top:-t,right:r,borderWidth:`0 ${t}px ${t}px ${t}px`,borderColor:`transparent transparent ${o} transparent`};break;case"left-start":n={top:r,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"left-end":n={bottom:r,right:-t,borderWidth:`${t}px 0 ${t}px ${t}px`,borderColor:`transparent transparent transparent ${o}`};break;case"top-start":n={bottom:-t,left:r,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"top-end":n={bottom:-t,right:r,borderWidth:`${t}px ${t}px 0 ${t}px`,borderColor:`${o} transparent transparent transparent`};break;case"right-start":n={top:r,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;case"right-end":n={bottom:r,left:-t,borderWidth:`${t}px ${t}px ${t}px 0`,borderColor:`transparent ${o} transparent transparent`};break;default:break}return eu.default.createElement(I,{className:fn,sx:{position:"absolute",width:0,height:0,border:"solid",...n}})},tu=$c;var ou=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},Rc=e=>{let{mixpanelPrefix:o,title:t,titleTestid:r,description:n,imgCover:i,arrow:a,placement:s,onNext:l,onPrev:u,onFinish:p,onClose:d,showClose:f,closeIcon:h,current:c,total:m,sx:x,placementSx:w,refContentUpdate:_,updatePopperPosition:C}=e,{theme:y}=_e(),{t:P}=A(),B=(0,Le.useRef)(null),E=(0,Le.useRef)(null),T=(0,Le.useRef)(0),U=c===m,D=c===1,N=y.palette.background.paper,H=typeof s=="function"?s():s,ae=W.useCallback(R=>r&&o?`${o} > ${r} > ${R}`:R,[r,o]),[j,Ge]=(0,Le.useState)(window.innerHeight<=380);(0,Le.useEffect)(()=>{let R=setInterval(()=>{C?.(),at?.()},60),Ce=setTimeout(()=>{clearInterval(R)},5e3);return()=>{clearInterval(R),clearTimeout(Ce)}},[c]);let at=(0,Le.useCallback)(ka(()=>{if(E.current&&B.current){let R=E.current.getBoundingClientRect();T.current=Math.max(T.current,B.current.clientHeight),R.bottom<T.current||R.top+T.current>document.documentElement.clientHeight||window.innerHeight<=380?Ge(!0):Ge(!1)}},50,{leading:!1}),[]);(0,Le.useEffect)(()=>{function R(){at()}return R(),window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}},[]);let Ct=(0,Le.useCallback)(()=>{u?.(),ou()},[u]),me=(0,Le.useCallback)(()=>{l?.(),ou()},[l]);return W.createElement(Zo,{elevation:1,sx:{position:"relative",backgroundColor:"background.paper",display:"flex",flexDirection:"column",borderRadius:"8px",...x,...w?w(H):{},backgroundImage:"none"},"data-testid":"maxai-tour-step"},W.createElement(I,{ref:E,sx:{overflow:"auto"}},W.createElement(I,{ref:R=>{B.current=R,_?.(R)},sx:{height:"auto",width:"100%"}},!j&&i&&W.createElement(W.Fragment,null,typeof i.node=="string"?W.createElement(I,{sx:{borderRadius:"8px 8px 0 0",width:"100%",overflow:"hidden",position:"relative",paddingTop:`${i.height/i.width*100}%`,"& > img":{width:"100%",height:"100%",position:"absolute",top:0,left:0}}},W.createElement("img",{src:i.node,alt:`MaxAI tour step of ${c}`})):i.node),W.createElement(b,{sx:{padding:"16px"}},H&&a&&W.createElement(tu,{placement:H,arrowSize:11,arrowColor:N}),f&&W.createElement(ie,{sx:{position:"absolute",top:12,right:12},onClick:d},h||W.createElement(as,{sx:{fontSize:"16px",color:"text.secondary"}})),(t||n)&&W.createElement(b,{gap:"8px"},t&&W.createElement(S,{textAlign:"left",component:"div",fontSize:"20px",color:"text.primary",lineHeight:1.2,fontWeight:700,noWrap:!0,"data-testid":r?`maxai-tour--title--${r.replaceAll(" ","-")}`:null},t),n&&W.createElement(S,{sx:{fontSize:"14px",fontWeight:400,color:"text.primary",textAlign:"left"}},n)),W.createElement(b,{mt:t||n?2:0,direction:"row",alignItems:"center",justifyContent:"space-between",height:"40px"},W.createElement(b,{direction:"row",alignItems:"center",width:0,flex:1},W.createElement(S,{fontSize:"12px",textAlign:"left",fontWeight:400,sx:{color:R=>R.palette.mode==="dark"?"rgba(255, 255, 255, 0.38)":"rgba(0, 0, 0, 0.38)"}},c,"/",m)),W.createElement(b,{direction:"row",alignItems:"center",gap:1,flexShrink:0,sx:{[`.${qo.root}`]:{height:"40px",padding:"6px 8px",borderRadius:"8px"}}},!D&&W.createElement(G,{variant:"outlined",onClick:Ct,sx:{border:"none!important",color:"text.secondary",p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--back-button"},P("package__ui:maxai_tour__button__back__title")),U?W.createElement(G,{variant:"contained",onClick:p,"data-button-clicked-name":ae("Start now"),sx:{p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--finish-button"},P("package__ui:maxai_tour__button__start_now__title")):W.createElement(G,{variant:"contained","data-button-clicked-name":ae("Next"),onClick:me,"data-testid":"maxai-tour--next-button",sx:{p:"10px 16px !important",lineHeight:"20px"}},P("package__ui:maxai_tour__button__next__title"))))))))},jc=e=>{let{current:o,renderPanel:t}=e;return W.createElement(W.Fragment,null,typeof t=="function"?t(e,o):W.createElement(Rc,{...e}))},ru=jc;var Gc={block:"center",inline:"center"},Zc=e=>{let{steps:o,open:t,defaultCurrent:r,current:n,onClose:i,onFinish:a,onChange:s,zIndex:l,disabledInteraction:u=!0,animation:p=!0,animationDuration:d=300,gap:f,rootContainer:h,maskMode:c,poperOffset:m,mixpanelPrefix:x}=e,[w,_]=De.default.useState(n??r??0);(0,De.useEffect)(()=>{if(n!==void 0){if(n<0||n>=o.length){_(0);return}_(n)}},[n,o]);let{target:C,title:y,titleTestid:P,description:B,imgCover:E,placement:T,fallbackPlacements:U,arrow:D,sx:N,placementSx:H,mask:ae,scrollIntoViewOptions:j=Gc,gap:Ge,closeIcon:at,showClose:Ct=!1,renderPanel:me,poperOffset:R}=o[w],Ce=(0,De.useRef)(null),Wt=Ce.current?{width:Ce.current.clientWidth,height:Ce.current.clientHeight}:void 0,zt=typeof T=="function"?T(Wt):T,{isDarkMode:Tt}=_e(),[st,It]=De.default.useState(t??!1),Pt=Ge??f,Nt=st&&(ae??!0),Fe=typeof Nt=="boolean"?Nt:!!Nt,[Ht,L]=xi(C,st,h,Pt,j),Q=(f?.offset?.[1]||f?.offset?.[0]||6)+(D?16:8),xe=Ie=>{if(typeof Ie=="number")return Ie;let[de,Pe=Q]=Ie,Ke=typeof Pe=="function"?Pe(Q):Pe;return[de,Ke]},re=ar("maxai-animation-fade-in",{enable:p,duration:d,fillMode:"forwards"}),Ze=(0,De.useRef)(null),qe=()=>{Ze.current?.update&&Ze.current.update()};if(!h)return null;let We=[{name:"offset",options:{offset:xe(R??m??[0,Q])}}];return U&&We.push({name:"flip",options:{fallbackPlacements:U}}),De.default.createElement(De.default.Fragment,null,Ht&&De.default.createElement(Jp,{fill:"rgba(0,0,0,0.6)",animation:p?w>0:!1,open:Fe,pos:Ht,showMask:Fe,zIndex:l,disabledInteraction:u,animationDuration:d,maskMode:c}),De.default.createElement(Ni,{ref:Ze,key:w,open:st&&!!L,anchorEl:L,placement:zt,container:h,style:{zIndex:(l||0)+1},sx:{opacity:p?0:1,...re},modifiers:We},({placement:Ie})=>De.default.createElement(ru,{refContentUpdate:de=>{Ce.current=de},mixpanelPrefix:x,title:y,titleTestid:P,description:B,imgCover:E,arrow:D,showClose:Ct,target:L,placement:Ie.startsWith("auto")?zt:Ie,renderPanel:me,mask:ae,sx:{opacity:p?0:1,...re,...N},placementSx:H,closeIcon:at,current:w+1,total:o.length,onClose:()=>{It(!1),i?.()},onNext:async()=>{let de=o[w]?.afterStep;de&&await de();let Pe=o[w+1]?.beforeStep;Pe&&await Pe(),_(Ke=>{let Qe=Ke+1;return Qe<o.length?(s?.(Qe),Qe):Ke})},onPrev:async()=>{let de=o[w]?.afterStep;de&&await de();let Pe=o[w-1]?.beforeStep;Pe&&await Pe(),_(Ke=>{let Qe=Ke-1;return Qe>=0?(s?.(Qe),Qe):Ke})},onFinish:()=>{It(!1),a?.()},updatePopperPosition:qe})))},nu=Zc;var su=g(In()),ue=g(v());var hn=g(v()),iu=g(Di());var qc=({children:e})=>{let[o,t]=(0,hn.useState)(null);return(0,hn.useEffect)(()=>{let r=_a();t(r)},[]),o?(0,iu.createPortal)(e,o):e},au=qc;var Kc=()=>ue.default.createElement(b,{width:"424px",mt:1},ue.default.createElement(Hs,{labelMaxWidth:108,sx:{px:1.5,py:1,maxWidth:"unset",width:"max-content",bgcolor:e=>e.palette.mode==="dark"?"#3B3D3E":"#E9E9EB","&:hover":{bgcolor:e=>e.palette.mode==="dark"?"rgba(144, 101, 176, 0.08)":"rgba(144, 101, 176, 0.04)"},[`& .${qo.endIcon} .${su.svgIconClasses.root}`]:{fontSize:20}},popoverProps:{sx:{zIndex:2147483647},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},syncChangeAILanguage:!0,unmountTriggerChange:!0})),Qc=()=>{let{t:e}=A(["maxai_tour"]),{isDarkMode:o}=_e(),t=(0,ue.useRef)(vr()),{loaded:r}=er(),n=wa(),[i,a]=(0,ue.useState)(!1),[s,l]=(0,ue.useState)(!0),[u,p]=(0,ue.useState)("setLanguage");(0,ue.useEffect)(()=>{ot().then(f=>{f.ON_BOARDING_MAXAI_3_0===!0&&p("newUI"),f[_r]!==!0&&a(!0)})},[]),ca(()=>{ot().then(f=>{f[_r]&&a(!1)})});let d=(0,ue.useMemo)(()=>{let f=440,h={gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!$t},c=[];return u==="setLanguage"&&c.push({...h,placement:"top",sx:{maxWidth:f,width:f},target:()=>{let m=n;return m?{getBoundingClientRect(){let x=m.getBoundingClientRect();return{width:0,left:x.left+x.width/2,top:x.height/2+164/2,height:0}}}:null},title:e("maxai_tour:sidebar_tour__v6_0__step__1__title"),titleTestid:"Choose interface language",description:ue.default.createElement(Kc,null),arrow:!1}),c.push({...h,placement:m=>dn(n?.querySelector('button[data-testid="maxai--chat-document-selector--button"]'),m||{width:328,height:380},["bottom-start","top-start","right-start","right","right-end"]),target:()=>n?.querySelector('button[data-testid="maxai--chat-document-selector--button"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__4__title"),titleTestid:"Add sources",description:e("maxai_tour:sidebar_tour__v6_0__step__4__description_1"),imgCover:{node:ft("/images/on-boarding/v6/4.webp"),width:800,height:450}},{...h,placement:m=>dn(n?.querySelector('button[data-testid="maxai-take-screenshot"]'),m||{width:328,height:380},["top-start","bottom-start","right","right-start","right-end"]),target:()=>n?.querySelector('button[data-testid="maxai-take-screenshot"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__5__title"),titleTestid:"Chat with screenshot",description:e("maxai_tour:sidebar_tour__v6_0__step__5__description_1"),imgCover:{node:ft("/images/on-boarding/v6/5.webp"),width:800,height:450}},{...h,placement:m=>dn(n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),m||{width:328,height:380},["top-start","bottom-start","top-start"]),sx:{...h.sx,[`& .${fn}`]:{left:306/2+"px"}},target:()=>n?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),title:e("maxai_tour:sidebar_tour__v6_0__step__2__title"),titleTestid:"Ask AI anything",description:e("maxai_tour:sidebar_tour__v6_0__step__2__description_1"),imgCover:{node:ft("/images/on-boarding/v6/2.webp"),width:800,height:450}}),c},[e,n,o,u]);return(0,ue.useEffect)(()=>{let f=()=>{setTimeout(()=>{n?.querySelector(".max-ai__action__set_variables_modal")?l(!0):l(!1)},1e3)};return window.addEventListener("click",f,{capture:!0}),f(),()=>{window.removeEventListener("click",f,{capture:!0})}},[]),!n||!r||!i||s?null:ue.default.createElement(au,null,ue.default.createElement(nu,{mixpanelPrefix:"Onboarding",zIndex:2147483647,rootContainer:n,open:!0,maskMode:t.current?"fixed":"absolute",steps:d,onFinish:async()=>{await tt(_r,!0),a(!1)}}))},lu=Qc;var bo=g(v()),pu={leftIsNarrow:!1},uu=(0,bo.createContext)(pu),mu=({children:e,leftIsNarrow:o})=>bo.default.createElement(uu.Provider,{value:{leftIsNarrow:o}},e),du=()=>{let e=(0,bo.useContext)(uu);return e||pu};var Jc=()=>{let{userSettings:e}=or(),o=Z(p=>p.conversationIds),t=ce(ys),r=(0,V.useMemo)(()=>t.rootRect&&e?.alwaysContinueInSidebar,[e?.alwaysContinueInSidebar,t.rootRect]),{messages:n}=Ha(o[0]||""),i=Et(o[0]||""),{leftIsNarrow:a}=du(),{maxAIBrowserWindows:s}=(0,V.useContext)(Ae),l=s.length>0,{localSettings:u}=pr();return V.default.createElement(V.default.Fragment,null,V.default.createElement(Ss,{leftPanelSide:l&&a?"drawer":"separateWindow",leftPanelContent:l&&V.default.createElement(sn,null),onPanelClose:async()=>{let p=await K.getCurrent();p&&await K.remove(p.id)},headerProps:()=>({renderLeftNode:()=>n.length===0?V.default.createElement(ne,{"data-testid":"maxai--chat-home-view--header--logo",sx:{display:"flex",alignItems:"center",height:"48px",color:"text.primary",textDecoration:"none!important"},href:J,target:"_blank"},V.default.createElement(nr,{sx:{fontSize:24,color:"inherit"}})):null,renderRightNode:()=>V.default.createElement(b,{direction:"row",gap:"8px",alignItems:"center",sx:{"&:not(:empty)":{p:"8px 4px"}}},V.default.createElement(Mp,null),V.default.createElement(Dp,null)),sx:{marginBottom:0,minHeight:0}}),toolsProps:()=>({renderLeftNode:p=>V.default.createElement(V.default.Fragment,null,p.proChatSwitch,u.chatMode==="pro_chat"&&p.aiModelSelector,u.chatMode==="pro_chat"&&p.aiLanguageSelector,V.default.createElement("div",{style:u.chatMode!=="pro_chat"?{display:"none"}:{}},p.portalRoot)),renderRightNode:p=>V.default.createElement(V.default.Fragment,null)}),inputProps:()=>({renderHeaderNode:p=>V.default.createElement(V.default.Fragment,null,p.documentSelector),renderFooterLeftNode:p=>V.default.createElement(V.default.Fragment,null,V.default.createElement(Ep,null),p.myOwnToolsButton,p.upgradePlanButton)}),messageProps:()=>({AIMessage:{renderTools:(p,d,{isLastMessage:f})=>V.default.createElement(V.default.Fragment,null,p.shareConversationButton,p.imageCopyButton,p.textCopyButton,p.attachmentsDownloadButton,p.usePromptButton,p.regenerateButton,p.modelSuggestions,r&&f&&V.default.createElement(V.default.Fragment,null,V.default.createElement(Op,null)))}})}),!i&&V.default.createElement(lu,null),V.default.createElement($p,null),V.default.createElement(Kp,null))},cu=Jc;var fu=g(to());var be=g(v()),ef=e=>{let{open:o,onClose:t}=e,r=Wi(),{t:n}=A(),[i,a]=(0,be.useState)(!0),s=(0,be.useMemo)(()=>{let l={bgcolor:r.palette.background.paper,divider:r.palette.divider,color:r.palette.text.primary},u=new URLSearchParams(l).toString();return`${J}/release-notes/?${u}`},[r]);return be.default.createElement(be.default.Fragment,null,be.default.createElement(va,{keepMounted:!i,anchor:"bottom",open:o,onClose:t,sx:{zIndex:2147483647,position:_o?"absolute":"fixed",[`& .${xa.paper}`]:{position:"absolute",borderTopRightRadius:8,borderTopLeftRadius:8,minHeight:"80vh",bgcolor:"background.paper",backgroundImage:"unset"}},disableScrollLock:!0,disableEnforceFocus:!0,PaperProps:{"data-testid":"maxai--release-notes-drawer--paper"},slotProps:{backdrop:{sx:{position:"absolute"}}}},be.default.createElement(b,{direction:"row",spacing:1,alignItems:"center",px:2,py:2.5,position:"relative"},be.default.createElement(ie,{onClick:t,size:"small",sx:{position:"absolute"}},be.default.createElement(fu.default,{sx:{fontSize:"24px"}})),be.default.createElement(S,{fontSize:16,fontWeight:500,lineHeight:2,flex:1,textAlign:"center"},n("package__common:release_notes"))),be.default.createElement(ir,null),be.default.createElement(I,{sx:{position:"relative",width:"100%",height:0,flex:1,"& > iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}},i&&be.default.createElement(et,{loading:!0}),be.default.createElement("iframe",{src:s,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,onLoad:()=>{a(!0)}}))))},hu=ef;var gu=g(vi());var Kt=g(v()),nf=()=>{let{t:e}=A();return Kt.default.createElement(ne,{underline:"none",target:"_blank",href:`${J}/account/rewards/`,position:"relative","data-testid":"rewards-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",justifyContent:"end",bgcolor:"#fff",p:1,borderRadius:1},onClick:()=>{ze("referral_card_clicked",{referralType:"REWARDS"})}},Kt.default.createElement(I,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},Kt.default.createElement("img",{src:Jo("/images/activity/rewards.png"),style:{height:140},alt:"rewards"})),Kt.default.createElement(G,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:Kt.default.createElement(gu.default,{color:"inherit",fontSize:"inherit"})},Kt.default.createElement(S,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__rewards__card__button__title"))))},bu=nf;var xu=g(vi());var Re=g(v());var wi=()=>{let{t:e}=A();return Re.default.createElement(ne,{underline:"none",target:"_blank",href:`${J}/affiliate/`,position:"relative","data-testid":"affiliate-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",p:1},onClick:()=>{ze("referral_card_clicked",{referralType:"AFFILIATE"})}},Re.default.createElement("img",{src:Jo("/images/activity/affiliate-bg.png"),style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:-1},alt:"rewards-bg"}),Re.default.createElement(b,{width:"100%",my:"auto"},Re.default.createElement(S,{fontSize:"20px",fontWeight:700,lineHeight:1.4,color:"#fff",textAlign:"center",whiteSpace:"pre-line"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__title")),Re.default.createElement(S,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_1"),Re.default.createElement(S,{component:"b",sx:{color:"#000",bgcolor:"#ffca16",fontSize:"16px",fontWeight:600,p:"2px 4px",ml:"2px",borderRadius:"6px"}},"25%")),Re.default.createElement(S,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_2"))),Re.default.createElement(G,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px",textAlign:"center","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:Re.default.createElement(xu.default,{color:"inherit",fontSize:"inherit"})},Re.default.createElement(S,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__button__title"))))};var Iu=g(vu()),Pu=g($u()),_i=g(wu()),Au=g(Cu()),ku=g(_u()),Bu=g(Su()),Eu=g(yu()),Mu=g(Gu());var Si=g(In());var M=g(v());var Tu=g(v()),yf=({sx:e,fontSize:o=12,...t})=>{let{userInfo:r}=ee();return Tu.default.createElement(ha,{sx:{textTransform:"capitalize",fontSize:o,backgroundColor:n=>n.palette.mode==="dark"?"#444647":"#E8E8E8",color:n=>n.palette.mode==="dark"?"#9D9D9D":"#8B8B8B",...e},...t},r?.email?.[0]||"M")},Ci=yf;var Tf=e=>{let{OptionsCardProps:o,avatarProps:t,needPopoverPointerMovingBuffer:r=!0,...n}=e,[i,a]=(0,M.useState)(!1),{t:s}=A(),{collapsed:l}=_s(),{isLogin:u,sigOutMaxAIAccount:p}=pa(),{canShowSurvey:d}=bs(),{userInfo:f,isFreeUser:h,isPayingUser:c,hasGroupId:m}=ee(),x=Ia(),{proChatReward:w}=Ka(),{dashboard:_}=ps(),{openConfirm:C,closeConfirm:y}=Pa(),P=u&&h&&(w>0||!_?.is_webstore_commented),B=()=>{C({sx:{p:4},title:M.default.createElement(S,{component:"p",fontSize:32,fontWeight:900},s("package__features:user__user_avatar__log_out__title")),content:M.default.createElement(S,{component:"p",fontSize:20},s("package__features:user__user_avatar__log_out__content")),customRenderCancelButton:M.default.createElement(M.default.Fragment,null),customRenderConfirmButton:M.default.createElement(b,{width:"100%"},M.default.createElement(G,{fullWidth:!0,variant:"contained",onClick:()=>{y(),p()},sx:{mb:2,borderRadius:"24px",height:48}},s("package__common:log_out")),M.default.createElement(G,{fullWidth:!0,variant:"outlined",onClick:y,sx:{borderRadius:"24px",height:48}},s("package__common:cancel")))})},E=(0,M.useMemo)(()=>{let T={padding:"12px 10px"};return[{value:"email",disabled:!0,divider:!0,render:()=>M.default.createElement(b,{gap:"16px",sx:{padding:"7px 8px 12px 8px"}},M.default.createElement(b,{direction:"row",alignItems:"center",gap:"8px",sx:{color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.38) !important":"rgba(0, 0, 0, 0.38) !important",textAlign:"left"}},M.default.createElement(nr,{sx:{fontSize:"14px",color:"inherit"}}),_o&&M.default.createElement(S,{fontSize:"12px"},Ti)),M.default.createElement(Ao,{testid:"maxai--sidebar--user-avatar--options--user-info",disabled:!0,sx:{padding:"0",justifyContent:"start"}},M.default.createElement(Ci,{sx:{width:"34px",height:"34px"}}),M.default.createElement(hs,{sx:{color:"text.secondary"},fontSize:"14px",title:f?.email},f?.email)))},{testid:"maxai--sidebar--user-avatar--options--your-plan",value:"your-plan",label:M.default.createElement(S,{fontSize:"14px"},s("package__features:user__user_avatar__menu_item__my_plan"),M.default.createElement(S,{fontSize:"inherit",ml:"12px",component:"span",sx:{fontSize:"14px",lineHeight:"1.5",fontWeight:400,color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.50)":"rgba(0, 0, 0, 0.38)"}},x)),icon:M.default.createElement(Iu.default,null),sx:T},...c&&m?[{testid:"maxai--sidebar--user-avatar--options--people",value:"people",label:s("package__features:user__user_avatar__menu_item__team_plan"),icon:M.default.createElement(Fi,null),sx:T}]:[],{testid:"maxai--sidebar--user-avatar--options--settings",value:"settings",label:s("common:settings"),icon:M.default.createElement(Mu.default,null),sx:T},{testid:"maxai--sidebar--user-avatar--options--chat-beta-features",render:()=>M.default.createElement(gs,{buttonSize:"medium"}),value:"chat-beta-features",divider:!0,sx:T},...d&&u?[{icon:M.default.createElement(Si.default,{sx:{fontSize:20,color:"inherit"}},M.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},M.default.createElement("path",{d:"M4.8127 6.80792H15.1877M4.8127 10.0007H15.1877M4.46686 14.0898V16.9173L8.15621 14.0898H16.5724C17.5269 14.0898 18.3002 13.3151 18.3002 12.3606V4.81315C18.3002 3.85865 17.5255 3.08398 16.571 3.08398H3.42936C2.47486 3.08398 1.7002 3.85865 1.7002 4.81315V12.3606C1.7002 13.3151 2.47486 14.0898 3.42936 14.0898H4.46686Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"1.60645"}))),testid:"maxai--sidebar--user-avatar--options--feedback",label:s("package__features:chat__chat_input__feedback_button"),value:"feedback",sx:T}]:[],{icon:M.default.createElement(_i.default,null),value:"help",disabledOnSelectOptionAutoClosePopup:!0,label:s("package__features:user__user_avatar__menu_item__help_menu"),sx:T,divider:!0,ButtonProps:{placement:_o?"left-end":"right-end",endIcon:M.default.createElement(Au.default,null),needPopoverPointerMovingBuffer:!0,onSelectOption:(D,N)=>{N.close(),D==="release-notes"&&a(!0),D==="help-center"&&window.open(Pi),D==="get-started"&&window.open(`${J}/onboarding/browser/step-1/`),D==="contact-us"&&window.open(Ai)},options:[{sx:T,icon:M.default.createElement(Bu.default,null),testid:"maxai--sidebar--user-avatar--options--release-notes",value:"release-notes",label:s("package__common:release_notes")},{sx:T,icon:M.default.createElement(_i.default,null),testid:"maxai--sidebar--user-avatar--options--help-center",value:"help-center",label:s("package__ui:sidebar_nav__footer__button__help")},{sx:T,icon:M.default.createElement(Eu.default,null),testid:"maxai--sidebar--user-avatar--options--get-started",value:"get-started",label:s("package__features:user__user_avatar__menu_item__get_started")},{sx:T,icon:M.default.createElement(Pu.default,null),testid:"maxai--sidebar--user-avatar--options--contact-us",value:"contact-us",label:s("package__common:contact_us")}]}},{testid:"maxai--sidebar--user-avatar--options--signout",icon:M.default.createElement(ku.default,null),value:"logout",label:s("package__features:user__user_avatar__menu_item__log_out"),divider:!0,sx:T},{testid:"maxai--sidebar--user-avatar--options--gift",icon:M.default.createElement(Si.default,{sx:{fontSize:20,color:"inherit"}},M.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},M.default.createElement("path",{d:"M12 6V22M12 6H8.46429C7.94332 6 7.4437 5.78929 7.07533 5.41421C6.70695 5.03914 6.5 4.53043 6.5 4C6.5 3.46957 6.70695 2.96086 7.07533 2.58579C7.4437 2.21071 7.94332 2 8.46429 2C11.2143 2 12 6 12 6ZM12 6H15.5357C16.0567 6 16.5563 5.78929 16.9247 5.41421C17.293 5.03914 17.5 4.53043 17.5 4C17.5 3.46957 17.293 2.96086 16.9247 2.58579C16.5563 2.21071 16.0567 2 15.5357 2C12.7857 2 12 6 12 6ZM20 11V18.8C20 19.9201 20 20.4802 19.782 20.908C19.5903 21.2843 19.2843 21.5903 18.908 21.782C18.4802 22 17.9201 22 16.8 22L7.2 22C6.07989 22 5.51984 22 5.09202 21.782C4.71569 21.5903 4.40973 21.2843 4.21799 20.908C4 20.4802 4 19.9201 4 18.8V11M2 7.6L2 9.4C2 9.96005 2 10.2401 2.10899 10.454C2.20487 10.6422 2.35785 10.7951 2.54601 10.891C2.75992 11 3.03995 11 3.6 11L20.4 11C20.9601 11 21.2401 11 21.454 10.891C21.6422 10.7951 21.7951 10.6422 21.891 10.454C22 10.2401 22 9.96005 22 9.4V7.6C22 7.03995 22 6.75992 21.891 6.54601C21.7951 6.35785 21.6422 6.20487 21.454 6.10899C21.2401 6 20.9601 6 20.4 6L3.6 6C3.03995 6 2.75992 6 2.54601 6.10899C2.35785 6.20487 2.20487 6.35785 2.10899 6.54601C2 6.75992 2 7.03995 2 7.6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),value:"gift",label:s(P?"package__features:user__user_avatar__menu_item__rewards":"package__features:user__user_avatar__menu_item__affiliate"),sx:T,ButtonProps:{title:P?M.default.createElement(bu,null):M.default.createElement(wi,null),tooltipProps:{placement:"right",disableInteractive:!1,PopperProps:{disablePortal:!0,sx:{"& > div":{p:"0px !important",maxWidth:"unset!important",bgcolor:"transparent !important"}}}}}}]},[x,s,f?.email,d,u,m,P]);return u?M.default.createElement(M.default.Fragment,null,M.default.createElement(Ao,{needPopoverPointerMovingBuffer:r,placement:l?"right-end":"top-start",options:E,testid:"maxai--sidebar--user-avatar--button",OptionsCardProps:{sx:{minWidth:"300px"},...o},PopoverProps:{keepMounted:!0},onSelectOption:T=>{T==="logout"&&(Ii?B():window.open(`${J}/logout/`)),T==="feedback"&&window.open(`${J}/survey/feedback/`),T!=="help"&&(T==="your-plan"&&window.open(`${J}/account/your-plan/`),T==="people"&&window.open(`${J}/account/team-plan/`,"_blank"),T==="settings"&&eo.openPage({key:"options"}),T==="gift"&&(P?window.open(`${J}/account/rewards/`,"_blank"):window.open(`${J}/affiliate/`,"_blank")))},...n},M.default.createElement(Ci,{sx:{width:"24px",height:"24px"},...t})),M.default.createElement(hu,{open:i,onClose:()=>a(!1)})):null},Lu=Tf;var nt=g(v());var Du=g(to()),yi=g(v());var If=()=>{let{t:e}=A(["client"]),{chatBoxShortCutKey:o}=Sr();return yi.default.createElement(Se,{testid:"maxai--sidebar--close--button",title:e("client:sidebar__button__close_sidebar"),description:o,onClick:yr,tooltipProps:{placement:"left"}},yi.default.createElement(Du.default,null))},Ou=If;var je=g(v()),Pf=e=>{let{anchorElementSelectors:o='[data-testid="maxai--sidebar--immersive_chat--button"]',placement:t="left-start",...r}=e,{t:n}=A(),[i,a]=je.default.useState(!1),[s,l]=je.default.useState(!0),u=Z(h=>h.conversationIds),p=Ya(u[0]),d=Et(u[0]),f=(0,je.useCallback)(async()=>{let h=await xr.getOnboardingDataByKey(cs),c=[...p].reverse().find(x=>x.type==="user"),m=c?.meta?.messageChatDocuments?c.meta.messageChatDocuments.length>0:!1;h&&p.length>0&&d===!1&&m===!1&&a(!0)},[p,d]);return(0,je.useEffect)(()=>{xr.getOnboardingDataByKey(Yn).then(h=>l(!!h))},[]),(0,je.useEffect)(()=>{s||f()},[s,f]),s?null:je.default.createElement(io,{trigger:i,placement:t,anchorElementSelectors:o,onShow:()=>{xr.setOnboardingData(Yn,!0)},CtaButtonProps:{"data-button-clicked-name":"Onboarding > Chat in full page > Got it"},...r},je.default.createElement(b,{spacing:.5},je.default.createElement(S,{fontSize:20,lineHeight:1.4,color:"text.primary",fontWeight:700,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__title")),je.default.createElement(S,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},n("package__features:onboarding__onboarding_popover__chat_in_full_page__description"))))},Vu=Pf;var xo=g(v());var Af=()=>{let{conversationId:e}=Z(n=>({conversationId:n.conversationIds[0]})),t=fr(e)?.meta?.AIModel,{t:r}=A(["client"]);return xo.default.createElement(xo.default.Fragment,null,xo.default.createElement(Se,{testid:"maxai--sidebar--immersive_chat--button",title:r("client:sidebar__button__immersive_chat"),onClick:()=>{ur({url:Za,query:`?id=${e}${t?`&ai-model=${t}`:""}`})},tooltipProps:{placement:"left"}},xo.default.createElement(te,{icon:"Fullscreen"})),xo.default.createElement(Vu,null))},Fu=Af;var $=g(v());var Oe=g(v());var kf=zi(({className:e,...o})=>Oe.default.createElement(Hi,{...o,classes:{popper:e},PopperProps:{sx:{zIndex:2147483620}}}))(({theme:e})=>({[`& .${Pn.tooltip}`]:{backgroundColor:"transparent",color:"rgba(0, 0, 0, 0.87)",fontSize:12,padding:0,boxShadow:"0px 12px 16px -4px rgba(0, 0, 0, 0.16), 0px 4px 8px -2px rgba(0, 0, 0, 0.08)",maxWidth:"none"},[`& .${Pn.arrow}`]:{color:e.palette.background.paper}})),Bf=e=>{let{icon:o,buttonTestId:t,onClick:r,tooltip:n,tooltipProps:i,href:a,layout:s="column",label:l,selected:u=!1,expanded:p=!0}=e,d=(0,Oe.useMemo)(()=>({flexDirection:"column",alignItems:"center",gap:.5,display:"flex",textDecoration:"none",color:u?"primary.main":"text.secondary",width:"36px",height:"36px",minWidth:"unset",overflow:"hidden",borderRadius:m=>m.spacing(1),cursor:"pointer",bgcolor:m=>u?m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)":"transparent","&:hover":{color:"primary.main",bgcolor:m=>m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)","& .maxai-sidebar-tab-item-icon":{bgcolor:"transparent",color:"primary.main"}},"& .maxai-sidebar-tab-item-icon":{color:u?"primary.main":"text.secondary",position:"relative",padding:"8px","& svg":{fontSize:"20px"}}}),[u]),f=(0,Oe.useMemo)(()=>({transition:"all 0.15s",display:"flex",width:"36px",height:"36px",flexDirection:"row",alignItems:"center",justifyContent:p?"flex-start":"center",borderRadius:m=>m.spacing(.75),textDecoration:"none",color:u?"primary.main":"text.secondary",minWidth:"unset",overflow:"hidden",cursor:"pointer",bgcolor:m=>u?m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)":"transparent","&:hover":{bgcolor:m=>m.palette.mode==="dark"?"rgba(44, 44, 44, 1)":"rgba(0, 0, 0, 0.06)","& .maxai-sidebar-tab-item-icon":{color:"primary.main"},"& .maxai-sidebar-tab-item-label":{color:"primary.main"}},"& .maxai-sidebar-tab-item-icon":{color:u?"primary.main":"text.secondary",borderRadius:m=>m.spacing(.75),position:"relative",fontSize:"20px",padding:"8px",bgcolor:"transparent","&:hover":{bgcolor:"transparent"}}}),[u,p]),h=Oe.default.createElement(Oe.default.Fragment,null,Oe.default.createElement(ie,{"data-testid":t,className:"maxai-sidebar-tab-item-icon"},o),s==="row"&&Oe.default.createElement(S,null,l)),c=a?Oe.default.createElement(ne,{component:"a",sx:s==="row"?f:d,href:a,target:"_blank"},h):Oe.default.createElement(I,{sx:s==="row"?f:d,onClick:r},h);return typeof n=="string"?Oe.default.createElement(To,{arrow:!0,placement:"left",title:n,...i},c):Oe.default.createElement(kf,{disableFocusListener:!0,placement:"left",title:n,...i},c)},vo=Bf;var Ef=[{customRender:()=>$.default.createElement(Cs,{variant:"icon"})},{customRender:()=>$.default.createElement(ws,{placement:"left"})}],Mf=()=>{let{t:e}=A(),{conversationType:o}=Z(m=>({conversationType:m.conversationType,setConversationType:m.setConversationType})),t=(0,$.useRef)(null),[r,n]=(0,$.useState)(window.innerHeight),i=ce(Is),a=1.5,s=12,l=36;(0,$.useEffect)(()=>{let m=setTimeout(()=>{t.current&&n(t.current?.clientHeight)},300);return()=>clearTimeout(m)},[i]);let u=Ef,{moreMarketingTabs:p,moreNavTabs:d,sidebarMarketingTabs:f,sidebarNavTabs:h}=(0,$.useMemo)(()=>{let m=[],x=[],w=[],_=[],C=l;if(u.forEach((y,P)=>{C+=l+(P>0?s:0),C>r?w.push(y):_.push(y)}),w.length===1){let y=w.pop();y&&_.push(y)}return{moreMarketingTabs:m,sidebarMarketingTabs:x,moreNavTabs:w,sidebarNavTabs:_}},[r,l,s,u]);(0,$.useEffect)(()=>{let m=tr(()=>{t.current&&n(t.current?.clientHeight)},100);return m(),m.flush(),window.addEventListener("resize",m),()=>{m.cancel(),window.removeEventListener("resize",m)}},[]);let c=p.length||d.length?$.default.createElement(I,{width:1,px:0},$.default.createElement(vo,{expanded:i,layout:"column",label:e("common:more"),icon:$.default.createElement(te,{icon:"More",sx:{fontSize:24}}),tooltip:$.default.createElement(Zo,{sx:{borderRadius:"8px",p:1,maxHeight:240,minWidth:"auto",overflow:"hidden",overflowY:"auto",border:"1px solid rgba(0, 0, 0, 0.08)",bgcolor:m=>m.palette.mode==="dark"?"background.secondary":"#fff"}},$.default.createElement(b,{gap:.5,spacing:0},d.map(m=>{if(m.customRender)return m.customRender();let x=o===m.value;return $.default.createElement(vo,{layout:"row",key:m.value,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},selected:x,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId})}),d.length&&p.length?$.default.createElement(ir,null):null,p.map((m,x)=>m.customRender?m.customRender():$.default.createElement(vo,{key:x,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},layout:"row",href:m.href,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))))})):null;return $.default.createElement(b,{ref:t,justifyContent:"space-between",direction:"column",sx:{width:"100%",height:0,flex:1,position:"relative"}},$.default.createElement(b,{"data-testid":"maxAISidebarMarketingTabsContainer",alignItems:"center",width:"100%",direction:"column",gap:a,sx:{position:"absolute",top:0}},f.map(m=>$.default.createElement(vo,{expanded:i,layout:"column",label:e(m.label),icon:m.icon,key:m.label,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},href:m.href,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))),$.default.createElement(b,{"data-testid":"maxAISidebarTabsContainer",alignItems:"center",width:"100%",spacing:2,sx:{position:"absolute",px:"3px",bottom:0}},$.default.createElement(b,{alignItems:"center",width:"100%",gap:a},h.map(m=>m.customRender?m.customRender():$.default.createElement(vo,{expanded:i,layout:"column",key:m.label,label:e(m.label),icon:m.icon,tooltip:typeof m.tooltip=="function"?e(m.tooltip()):m.tooltip,tooltipProps:{placement:"left",...m.tooltipProps},selected:o===m.value,onClick:m.onClick,buttonTestId:m.buttonTestId,labelTestId:m.labelTestId}))),c))},Wu=Mf;var Lf=()=>nt.default.createElement(b,{alignItems:"center",id:"sidebar-nav",sx:{width:"52px",px:"4px",py:"8px",bgcolor:"background.secondary"},gap:"12px"},nt.default.createElement(b,{gap:"4px"},nt.default.createElement(Ou,null),nt.default.createElement(Fu,null)),nt.default.createElement(Wu,null),nt.default.createElement(Df,null)),Df=()=>nt.default.createElement(b,{mb:"12px",spacing:"12px",alignItems:"center",sx:{color:"text.secondary","& > button, & > a":{color:"text.secondary"}}},nt.default.createElement(I,{sx:{width:32,height:32}}),nt.default.createElement(I,{sx:{width:32,height:32}}),nt.default.createElement(Lu,{placement:"left-end",sx:{p:"4px"}})),zu=Lf;var Ve=g(v());var Of=ft("/images/activity/promotion-activity_bar_icon.png"),Vf=ft("/images/activity/promotion-activity_bar_bg.png"),Ff=ft("/images/activity/promotion-activity_bar_button_bg.png"),Nu=`${$o()}_promotion_activity_bar`,Wf=()=>{let{userInfo:e,loaded:o}=ee(),[t,r]=(0,Ve.useState)(!1),{isActivityUser:n,loaded:i,isActivityOpen:a}=ln(),s=(0,Ve.useMemo)(()=>!e||!o?null:Np(e),[e,o]);(0,Ve.useEffect)(()=>{ot().then(d=>{d[Nu]||r(!0)})},[]);let l=d=>{d.stopPropagation(),r(!1),tt(Nu,!0)},u=d=>{d.stopPropagation(),window.open(s?.learnMoreLink)},{t:p}=A();return!t||!i||!s||!a||!n?null:Ve.default.createElement(b,{spacing:1,direction:"row",sx:{background:`url(${Vf}) center / 100% 100% rgba(75, 31, 120, 1)`,height:"56px",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},onClick:u},Ve.default.createElement(G,{sx:{background:`url(${Ff}) 0 0 / 100% 131% !important`,overflow:"visible",height:"34px",color:"#fff",minWidth:"200px",pt:"6px",px:"15px"},disableRipple:!0,onClick:u},p("package__features:pricing__promotion_activity_bar__button")),Ve.default.createElement(S,{sx:{fontSize:"18px",fontWeight:500,lineHeight:"27px",textAlign:"center",color:"#fff"}},p("package__features:pricing__promotion_activity_bar__label")),Ve.default.createElement("img",{src:Of,alt:"black-friday-gift-icon",width:24,height:24}),Ve.default.createElement(ie,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:l},Ve.default.createElement(te,{icon:"Close",sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"24px"}})))},Hu=Wf;var zf=()=>{let e=ce(Je),o=e.open||e.loadedAppSidebar;return it.default.createElement(os,null,it.default.createElement(kp,null),o&&it.default.createElement(b,{flex:1,height:0},it.default.createElement(_p,null),it.default.createElement(Hu,null),it.default.createElement(b,{flex:1,direction:"row",height:0},it.default.createElement(I,{flex:1,width:0,sx:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}},it.default.createElement(bp,null,it.default.createElement(cu,null))),it.default.createElement(zu,null))))},Yu=zf;var wo=g(v());var Nf={top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},Hf=150,Yf=Oi({key:"SidebarStylesAtom",default:{minWidth:480,visibleWidth:480,maxWidth:0}}),Uf=()=>{let{localSettings:e,setLocalSettings:o}=pr(),[t,r]=(0,wo.useState)(!1),[n,i]=Qt(Yf),{maxWidth:a}=n,s=e.sidebarSettings,l=async u=>{i(p=>({...p,visibleWidth:u})),t&&(await o({sidebarSettings:{common:{chatBoxWidth:u}}}),ht())};return(0,wo.useEffect)(()=>{let u=()=>{let p=Math.max((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)-Hf,480);i(d=>({...d,maxWidth:p}))};return window.addEventListener("resize",u),u(),()=>{window.removeEventListener("resize",u)}},[]),(0,wo.useEffect)(()=>{i(u=>({...u,visibleWidth:Math.min(u.visibleWidth,a)}))},[a]),(0,wo.useEffect)(()=>{s?.common?.chatBoxWidth&&a&&(i(u=>({...u,visibleWidth:Math.min(a,s?.common?.chatBoxWidth??u.minWidth)})),r(!0))},[s?.common?.chatBoxWidth,a,i]),{loaded:t,minWidth:n.minWidth,maxWidth:n.maxWidth,resizeEnable:{...Nf,left:!vr()},visibleWidth:n.visibleWidth,setLocalWidth:l}};var Uu=Uf;var Xf=()=>{let e=z.default.useRef(null),{visibleWidth:o,maxWidth:t,minWidth:r,setLocalWidth:n,resizeEnable:i}=Uu(),{isSubscriptionPaymentFailed:a}=ee(),s=ns(),[l,u]=Qt(Je),p=Jt(mr);(0,z.useEffect)(()=>{let x=new MutationObserver(_=>{_.forEach(C=>{C.type!=="attributes"&&C.attributeName!=="class"||u(y=>({...y,env:qi(),open:C.target?.classList?.contains("open")||!1}))})}),w=document.getElementById(Bi);return w&&x.observe(w,{attributes:!0,childList:!1}),()=>{x.disconnect()}},[]);let{refreshChatAIModelSelector:d}=qa(),f=(0,z.useRef)(!1);(0,z.useEffect)(()=>{l.open&&(f.current||(window.postMessage({event:Vs,data:{open:l.open}}),f.current=!0),u(x=>({...x,loadedAppSidebar:!0})))},[l.open,d]),(0,z.useEffect)(()=>{if(!l.loadedAppSidebar){let x=setInterval(()=>{Tr()&&(u(w=>({...w,loadedAppSidebar:!0})),clearInterval(x))},1e3);return()=>{clearInterval(x)}}return()=>{}},[l.loadedAppSidebar]),(0,z.useEffect)(()=>{l.open&&p(x=>({...x,show:a}))},[l.open]),(0,z.useEffect)(()=>()=>{$a()},[]);let[h,c]=(0,z.useState)(!1),m=(0,z.useRef)(o);return m.current=o,(0,z.useEffect)(()=>{let x=()=>{c(window.innerWidth-m.current<450)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]),z.default.createElement(z.default.Fragment,null,z.default.createElement(ss,{ref:s,size:{width:o,height:"100%"},enable:i,maxWidth:t,minWidth:r,onResize:(x,w,_,C)=>{c(window.innerWidth-o-C.width<450)},onResizeStop:async(x,w,_,C)=>{await n(o+C.width)}},z.default.createElement(I,{component:"div",className:"use-chat-gpt-ai-app",ref:e,sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",borderLeft:"1px solid rgba(0, 0, 0, .1)",bgcolor:"background.paper"},onWheel:x=>{x.stopPropagation()}},z.default.createElement(b,{height:"100%",sx:{"& *":{boxSizing:"border-box",fontFamily:'"Roboto","Helvetica","Arial",sans-serif!important'}}},z.default.createElement(ya,null,z.default.createElement(qs,null),z.default.createElement(ls,null),z.default.createElement(Os,null),z.default.createElement(Us,null),z.default.createElement($s,null,z.default.createElement(ko,{defaultContextMenuPath:"/my_own_tools"},z.default.createElement(mu,{leftIsNarrow:h},z.default.createElement(Yu,null)))))))))},$k=Xf;export{$k as default};
